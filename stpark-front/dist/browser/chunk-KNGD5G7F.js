import{a as D,c as R,f as j}from"./chunk-CFZHHQ3I.js";import{a as M,b as k}from"./chunk-AGGAQN5G.js";import{b as P,c as T}from"./chunk-72F6PA3H.js";import{a as N,b as V}from"./chunk-6JXRNXI3.js";import{la as w,oa as A}from"./chunk-56JILNRZ.js";import{b as I,d as F}from"./chunk-P2DCSIJY.js";import"./chunk-FDUGCV2L.js";import{m as C,t as h}from"./chunk-IZAOXH6X.js";import{$b as _,Eb as c,Pb as t,Qb as n,Rb as s,U as y,Vb as x,bb as a,bc as m,cb as f,f as g,mc as i,nc as r,oa as u,oc as b,pa as p,pb as S,wb as E}from"./chunk-QDWFRTQW.js";import"./chunk-TSRGIXR5.js";function z(l,v){l&1&&(t(0,"div",4),s(1,"mat-spinner",5),n())}function L(l,v){if(l&1){let e=x();t(0,"mat-card",6)(1,"mat-card-content",7)(2,"div",8)(3,"div",9)(4,"mat-icon",10),i(5,"check_circle"),n()(),t(6,"h1",11),i(7,"Transacci\xF3n Autorizada"),n(),t(8,"p",12),i(9,"Su pago ha sido procesado exitosamente"),n()(),s(10,"mat-divider",13),t(11,"div",14)(12,"p",15),i(13,"Comercio"),n(),t(14,"p",16),i(15),n()(),t(16,"div",17)(17,"div",18)(18,"div")(19,"p",15),i(20,"N\xFAmero de Orden"),n(),t(21,"p",19),i(22),n()(),t(23,"div")(24,"p",15),i(25,"Folio de Factura"),n(),t(26,"p",19),i(27),n()(),t(28,"div")(29,"p",15),i(30,"Monto"),n(),t(31,"p",20),i(32),n()(),t(33,"div")(34,"p",15),i(35,"Moneda"),n(),t(36,"p",19),i(37),n()(),t(38,"div")(39,"p",15),i(40,"C\xF3digo de Autorizaci\xF3n"),n(),t(41,"p",19),i(42),n()(),t(43,"div")(44,"p",15),i(45,"Fecha de la Transacci\xF3n"),n(),t(46,"p",19),i(47),n()(),t(48,"div")(49,"p",15),i(50,"Tipo de Pago"),n(),t(51,"p",19),i(52),n()(),t(53,"div")(54,"p",15),i(55,"Cantidad de Cuotas"),n(),t(56,"p",19),i(57),n()(),t(58,"div")(59,"p",15),i(60,"\xDAltimos 4 D\xEDgitos de la Tarjeta"),n(),t(61,"p",19),i(62),n()()()(),t(63,"div",21)(64,"p",22),i(65,"Descripci\xF3n de Bienes y/o Servicios"),n(),t(66,"p",23),i(67),n()(),t(68,"div",24)(69,"button",25),_("click",function(){u(e);let o=m();return p(o.goToInvoices())}),t(70,"mat-icon"),i(71,"arrow_back"),n(),i(72," Volver a Facturas "),n()()()()}if(l&2){let e=m();a(15),r(e.data==null?null:e.data.commerce_name),a(7),r((e.data==null?null:e.data.buy_order)||"N/A"),a(5),r((e.data==null?null:e.data.folio)||"N/A"),a(5),r(e.formatAmount(e.data==null?null:e.data.amount)),a(5),r((e.data==null?null:e.data.currency)||"CLP"),a(5),r((e.data==null?null:e.data.authorization_code)||"N/A"),a(5),r(e.formatDate(e.data==null?null:e.data.payment_date)),a(5),r((e.data==null?null:e.data.payment_type)||"N/A"),a(5),r((e.data==null?null:e.data.installments)==="0"?"Sin cuotas":(e.data==null?null:e.data.installments)||"N/A"),a(5),r(e.data!=null&&e.data.card_last4?"****"+e.data.card_last4:"N/A"),a(5),r((e.data==null?null:e.data.description)||"Pago de factura"+(e.data!=null&&e.data.folio?" N\xB0 "+e.data.folio:""))}}function O(l,v){if(l&1){let e=x();t(0,"mat-card",6)(1,"mat-card-content",7)(2,"div",8)(3,"div",26)(4,"mat-icon",27),i(5,"cancel"),n()(),t(6,"h1",11),i(7),n(),t(8,"p",28),i(9,"La transacci\xF3n no pudo ser autorizada"),n()(),s(10,"mat-divider",13),t(11,"div",17)(12,"div",18)(13,"div")(14,"p",15),i(15,"N\xFAmero de Orden"),n(),t(16,"p",19),i(17),n()(),t(18,"div")(19,"p",15),i(20,"Comercio"),n(),t(21,"p",19),i(22),n()(),t(23,"div")(24,"p",15),i(25,"Folio de Factura"),n(),t(26,"p",19),i(27),n()(),t(28,"div")(29,"p",15),i(30,"C\xF3digo de Respuesta"),n(),t(31,"p",19),i(32),n()()()(),t(33,"div",29)(34,"p",30),i(35,"Las posibles causas de este rechazo son:"),n(),t(36,"ul",31)(37,"li"),i(38,"Error en el ingreso de los datos de su tarjeta de cr\xE9dito o d\xE9bito (fecha y/o c\xF3digo de seguridad)."),n(),t(39,"li"),i(40,"Su tarjeta de cr\xE9dito o d\xE9bito no cuenta con saldo suficiente."),n(),t(41,"li"),i(42,"Tarjeta a\xFAn no habilitada en el sistema financiero."),n()()(),t(43,"div",24)(44,"button",32),_("click",function(){u(e);let o=m();return p(o.goToInvoices())}),t(45,"mat-icon"),i(46,"arrow_back"),n(),i(47," Volver a Facturas "),n()()()()}if(l&2){let e=m();a(7),b(" Orden de Compra ",(e.data==null?null:e.data.buy_order)||"XXXXXXX"," Rechazada "),a(10),r((e.data==null?null:e.data.buy_order)||"N/A"),a(5),r((e.data==null?null:e.data.commerce_name)||"STPark"),a(5),r((e.data==null?null:e.data.folio)||"N/A"),a(5),r((e.data==null?null:e.data.response_code)||"N/A")}}function X(l,v){if(l&1){let e=x();t(0,"mat-card",6)(1,"mat-card-content",7)(2,"div",8)(3,"div",33)(4,"mat-icon",34),i(5,"warning"),n()(),t(6,"h1",11),i(7,"Transacci\xF3n Cancelada"),n(),t(8,"p",12),i(9,"El proceso de pago fue cancelado"),n()(),s(10,"mat-divider",13),t(11,"div",17)(12,"div",18)(13,"div")(14,"p",15),i(15,"Comercio"),n(),t(16,"p",19),i(17),n()(),t(18,"div")(19,"p",15),i(20,"Folio de Factura"),n(),t(21,"p",19),i(22),n()()()(),t(23,"div",24)(24,"button",25),_("click",function(){u(e);let o=m();return p(o.goToInvoices())}),t(25,"mat-icon"),i(26,"arrow_back"),n(),i(27," Volver a Facturas "),n()()()()}if(l&2){let e=m();a(17),r((e.data==null?null:e.data.commerce_name)||"STPark"),a(5),r((e.data==null?null:e.data.folio)||"N/A")}}function B(l,v){if(l&1){let e=x();t(0,"mat-card",6)(1,"mat-card-content",7)(2,"div",8)(3,"div",26)(4,"mat-icon",27),i(5,"error"),n()(),t(6,"h1",11),i(7,"Error en la Transacci\xF3n"),n(),t(8,"p",35),i(9),n()(),s(10,"mat-divider",13),t(11,"div",21)(12,"p",36),i(13,"Por favor, contacte con soporte si el problema persiste."),n()(),t(14,"div",24)(15,"button",32),_("click",function(){u(e);let o=m();return p(o.goToInvoices())}),t(16,"mat-icon"),i(17,"arrow_back"),n(),i(18," Volver a Facturas "),n()()()()}if(l&2){let e=m();a(9),r((e.data==null?null:e.data.error_message)||"Ocurri\xF3 un error al procesar la transacci\xF3n")}}var ae=(()=>{class l{constructor(e,d){this.route=e,this.router=d,this._unsubscribeAll=new g,this.data=null,this.loading=!0}ngOnInit(){this.route.queryParams.pipe(y(this._unsubscribeAll)).subscribe(e=>{this.data={status:e.status||"error",invoice_id:e.invoice_id,buy_order:e.buy_order,commerce_name:e.commerce_name||"STPark",amount:e.amount,currency:e.currency||"CLP",authorization_code:e.authorization_code,payment_date:e.payment_date,payment_type:e.payment_type,installments:e.installments,card_last4:e.card_last4,folio:e.folio,response_code:e.response_code,error_message:e.error_message,description:e.description},this.loading=!1})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}formatAmount(e){if(!e)return"N/A";let d=parseFloat(e);return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)}formatDate(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}goToInvoices(){this.router.navigate(["/invoices"])}isSuccess(){return this.data?.status==="success"}isFailed(){return this.data?.status==="failed"}isCancelled(){return this.data?.status==="cancelled"}isError(){return this.data?.status==="error"}static{this.\u0275fac=function(d){return new(d||l)(f(I),f(F))}}static{this.\u0275cmp=S({type:l,selectors:[["app-payment-result"]],decls:7,vars:5,consts:[[1,"min-h-screen","bg-gray-50","flex","items-center","justify-center","p-4"],[1,"max-w-3xl","w-full"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","shadow-lg",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],["diameter","50"],[1,"shadow-lg"],[1,"p-8"],[1,"text-center","mb-8"],[1,"inline-flex","items-center","justify-center","w-20","h-20","rounded-full","bg-green-100","mb-4"],[1,"text-green-600","text-5xl"],[1,"text-3xl","font-bold","text-gray-900","mb-2"],[1,"text-lg","text-gray-600"],[1,"mb-6"],[1,"bg-blue-50","p-4","rounded-lg","mb-6"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-xl","font-bold","text-gray-900"],[1,"space-y-4","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-lg","font-semibold","text-blue-600"],[1,"bg-gray-50","p-4","rounded-lg","mb-6"],[1,"text-sm","font-semibold","text-gray-700","mb-2"],[1,"text-gray-900"],[1,"flex","justify-center","gap-4","mt-8"],["mat-raised-button","","color","primary",3,"click"],[1,"inline-flex","items-center","justify-center","w-20","h-20","rounded-full","bg-red-100","mb-4"],[1,"text-red-600","text-5xl"],[1,"text-lg","text-red-600","font-semibold"],[1,"bg-red-50","border-l-4","border-red-500","p-6","mb-6"],[1,"text-red-800","font-semibold","mb-3"],[1,"list-disc","list-inside","space-y-2","text-red-700"],["mat-stroked-button","",3,"click"],[1,"inline-flex","items-center","justify-center","w-20","h-20","rounded-full","bg-yellow-100","mb-4"],[1,"text-yellow-600","text-5xl"],[1,"text-lg","text-red-600"],[1,"text-sm","text-gray-600"]],template:function(d,o){d&1&&(t(0,"div",0)(1,"div",1),E(2,z,2,0,"div",2)(3,L,73,11,"mat-card",3)(4,O,48,5,"mat-card",3)(5,X,28,2,"mat-card",3)(6,B,19,1,"mat-card",3),n()()),d&2&&(a(2),c("ngIf",o.loading),a(),c("ngIf",!o.loading&&o.isSuccess()),a(),c("ngIf",!o.loading&&o.isFailed()),a(),c("ngIf",!o.loading&&o.isCancelled()),a(),c("ngIf",!o.loading&&o.isError()))},dependencies:[h,C,j,D,R,A,w,T,P,k,M,V,N],styles:["mat-card[_ngcontent-%COMP%]{border-radius:.5rem}mat-spinner[_ngcontent-%COMP%]{margin:0 auto}"]})}}return l})();export{ae as PaymentResultComponent};
