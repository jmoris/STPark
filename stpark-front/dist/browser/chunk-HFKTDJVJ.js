import{a as W}from"./chunk-BEHE27WQ.js";import{a as nt}from"./chunk-J2G3Y6LG.js";import{c as Xe}from"./chunk-ICPS6N2F.js";import{a as We,b as Qe,c as Ye,d as q,e as Je,f as Ke,g as it}from"./chunk-TU7IT4N6.js";import{a as Oe,b as Be,c as Re,d as Ue,e as je,f as $e,g as ze,h as Le,i as He,j as Ge,k as qe}from"./chunk-Y6UNS2UZ.js";import{a as Ze,c as et,f as tt}from"./chunk-N7KP3IEB.js";import"./chunk-KEI4KRBM.js";import{a as L}from"./chunk-FSRW5HPF.js";import{a as ue,b as fe,c as _e,h as ge}from"./chunk-65NYBKEE.js";import{a as Ce,b as Ee,c as Se,d as be}from"./chunk-IDWAZBHT.js";import"./chunk-FSA3IEFI.js";import{a as H,b as G}from"./chunk-POSCZER2.js";import"./chunk-ECYJLMJT.js";import{a as he}from"./chunk-VKB6BRO6.js";import{a as Ve,b as Ae}from"./chunk-RDXEG6SZ.js";import{b as A,c as O}from"./chunk-IMRKXFOQ.js";import{d as U,e as j}from"./chunk-5Q7CCL6V.js";import{a as $,b as z}from"./chunk-CWSZZ2DY.js";import{b as w,c as xe,j as D,k as T}from"./chunk-K3BNOLHS.js";import{A as Ne,b as B,d as S,f as R,g as Me,j as ve,k as Pe,l as ye,n as Ie,o as Fe,q as we,u as De,x as Te,z as ke}from"./chunk-ZTFUS4RN.js";import{fa as F,la as k,na as N,oa as V}from"./chunk-QQQ5XT6I.js";import"./chunk-YXFY4UXK.js";import{a as pe,d as ce}from"./chunk-EARUC3FY.js";import{m as y,s as I}from"./chunk-BAM5RHC5.js";import{$b as _,Eb as p,Jb as re,Pb as i,Qb as t,Rb as u,Sb as C,Tb as E,U as v,Vb as Q,_ as ne,bb as m,bc as c,cb as g,da as ae,f as ie,fc as oe,gc as le,hc as me,lc as se,mc as n,nc as h,oa as b,oc as x,pa as M,pb as P,rc as Y,sc as J,tc as K,uc as de,wb as f}from"./chunk-MLNNMN4J.js";import{a as te}from"./chunk-TSRGIXR5.js";function ht(a,s){if(a&1&&(i(0,"mat-error"),n(1),t()),a&2){let e=c();m(),x(" ",e.getErrorMessage("name")," ")}}function Ct(a,s){if(a&1&&(i(0,"mat-error"),n(1),t()),a&2){let e=c();m(),x(" ",e.getErrorMessage("name")," ")}}function Et(a,s){if(a&1&&(i(0,"mat-error"),n(1),t()),a&2){let e=c();m(),x(" ",e.getErrorMessage("max_price_uf")," ")}}function St(a,s){if(a&1&&(i(0,"mat-error"),n(1),t()),a&2){let e=c();m(),x(" ",e.getErrorMessage("max_price_uf")," ")}}function bt(a,s){a&1&&u(0,"mat-spinner",37)}function Mt(a,s){if(a&1&&(i(0,"mat-icon"),n(1),t()),a&2){let e=c();m(),h(e.data.isEdit?"save":"add")}}var X=(()=>{class a{constructor(e,r,o,l,d){this.fb=e,this.dialogRef=r,this.data=o,this.planService=l,this.snackBar=d,this.loading=!1,this.planForm=this.createForm()}ngOnInit(){this.data.isEdit&&this.data.plan&&this.loadPlanData()}createForm(){return this.fb.group({name:["",[S.required,S.minLength(2)]],description:[""],max_price_uf:[0,[S.required,S.min(0)]],status:["ACTIVE",S.required],feature:this.fb.group({max_operators:[null],max_streets:[null],max_sectors:[null],max_sessions:[null],max_pricing_profiles:[null],max_pricing_rules:[null],includes_debt_management:[!1],report_type:["BASIC"],support_type:["BASIC"]})})}loadPlanData(){this.data.plan&&this.planForm.patchValue({name:this.data.plan.name,description:this.data.plan.description||"",max_price_uf:this.data.plan.max_price_uf,status:this.data.plan.status,feature:{max_operators:this.data.plan.feature?.max_operators||null,max_streets:this.data.plan.feature?.max_streets||null,max_sectors:this.data.plan.feature?.max_sectors||null,max_sessions:this.data.plan.feature?.max_sessions||null,max_pricing_profiles:this.data.plan.feature?.max_pricing_profiles||null,max_pricing_rules:this.data.plan.feature?.max_pricing_rules||null,includes_debt_management:this.data.plan.feature?.includes_debt_management||!1,report_type:this.data.plan.feature?.report_type||"BASIC",support_type:this.data.plan.feature?.support_type||"BASIC"}})}getErrorMessage(e){let r=this.planForm.get(e);return r?.hasError("required")?"Este campo es requerido":r?.hasError("minlength")?"Debe tener al menos 2 caracteres":r?.hasError("min")?"El valor debe ser mayor o igual a 0":"Campo inv\xE1lido"}onSubmit(){if(this.planForm.valid){this.loading=!0;let e=this.planForm.value,r={name:e.name,description:e.description,max_price_uf:e.max_price_uf,status:e.status,feature:e.feature};this.data.isEdit&&this.data.plan?.id?this.planService.updatePlan(this.data.plan.id,r).subscribe({next:o=>{this.loading=!1,this.snackBar.open("Plan actualizado exitosamente","Cerrar",{duration:3e3}),this.dialogRef.close(!0)},error:o=>{this.loading=!1,console.error("Error updating plan:",o),this.snackBar.open("Error al actualizar plan","Cerrar",{duration:3e3})}}):this.planService.createPlan(r).subscribe({next:o=>{this.loading=!1,this.snackBar.open("Plan creado exitosamente","Cerrar",{duration:3e3}),this.dialogRef.close(!0)},error:o=>{this.loading=!1,console.error("Error creating plan:",o),this.snackBar.open("Error al crear plan","Cerrar",{duration:3e3})}})}else this.planForm.markAllAsTouched()}onCancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(r){return new(r||a)(g(Te),g(ue),g(fe),g(W),g(L))}}static{this.\u0275cmp=P({type:a,selectors:[["app-plan-form"]],decls:97,vars:11,consts:[[1,"plan-form-dialog"],[1,"dialog-header"],[1,"dialog-title"],["mat-icon-button","",1,"close-button",3,"click"],[1,"dialog-content"],[1,"plan-form",3,"formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Ej: Plan B\xE1sico"],[4,"ngIf"],["matInput","","formControlName","description","rows","3","placeholder","Descripci\xF3n del plan"],["appearance","outline",1,"half-width"],["matInput","","type","number","formControlName","max_price_uf","placeholder","0.00","step","0.01","min","0"],["formControlName","status"],["value","ACTIVE"],["value","INACTIVE"],["value","DISCONTINUED"],["formGroupName","feature",1,"form-section"],["appearance","outline",1,"third-width"],["matInput","","type","number","formControlName","max_operators","placeholder","Sin l\xEDmite","min","0"],["matInput","","type","number","formControlName","max_sectors","placeholder","Sin l\xEDmite","min","0"],["matInput","","type","number","formControlName","max_streets","placeholder","Sin l\xEDmite","min","0"],["matInput","","type","number","formControlName","max_sessions","placeholder","Sin l\xEDmite","min","0"],["matInput","","type","number","formControlName","max_pricing_profiles","placeholder","Sin l\xEDmite","min","0"],["matInput","","type","number","formControlName","max_pricing_rules","placeholder","Sin l\xEDmite","min","0"],["formControlName","report_type"],["value","BASIC"],["value","ADVANCED"],["formControlName","support_type"],["value","PRIORITY"],["formControlName","includes_debt_management"],[1,"dialog-actions"],["mat-button","",1,"rounded-sm",3,"click","disabled"],["mat-raised-button","","color","primary",1,"rounded-sm",3,"click","disabled"],["diameter","20","class","inline-spinner",4,"ngIf"],["diameter","20",1,"inline-spinner"]],template:function(r,o){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),n(3),t(),i(4,"button",3),_("click",function(){return o.onCancel()}),i(5,"mat-icon"),n(6,"close"),t()()(),i(7,"div",4)(8,"form",5)(9,"div",6)(10,"h3",7),n(11,"Informaci\xF3n B\xE1sica"),t(),i(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),n(15,"Nombre del Plan"),t(),u(16,"input",10),f(17,ht,2,1,"mat-error",11)(18,Ct,2,1,"mat-error",11),t()(),i(19,"div",8)(20,"mat-form-field",9)(21,"mat-label"),n(22,"Descripci\xF3n"),t(),u(23,"textarea",12),t()(),i(24,"div",8)(25,"mat-form-field",13)(26,"mat-label"),n(27,"Precio M\xE1ximo (UF)"),t(),u(28,"input",14),f(29,Et,2,1,"mat-error",11)(30,St,2,1,"mat-error",11),t(),i(31,"mat-form-field",13)(32,"mat-label"),n(33,"Estado"),t(),i(34,"mat-select",15)(35,"mat-option",16),n(36,"Activo"),t(),i(37,"mat-option",17),n(38,"Inactivo"),t(),i(39,"mat-option",18),n(40,"Descontinuado"),t()()()()(),i(41,"div",19)(42,"h3",7),n(43,"Caracter\xEDsticas y L\xEDmites"),t(),i(44,"div",8)(45,"mat-form-field",20)(46,"mat-label"),n(47,"M\xE1x. Operadores"),t(),u(48,"input",21),t(),i(49,"mat-form-field",20)(50,"mat-label"),n(51,"M\xE1x. Sectores"),t(),u(52,"input",22),t(),i(53,"mat-form-field",20)(54,"mat-label"),n(55,"M\xE1x. Calles"),t(),u(56,"input",23),t()(),i(57,"div",8)(58,"mat-form-field",20)(59,"mat-label"),n(60,"M\xE1x. Sesiones"),t(),u(61,"input",24),t(),i(62,"mat-form-field",20)(63,"mat-label"),n(64,"M\xE1x. Perfiles de Precio"),t(),u(65,"input",25),t(),i(66,"mat-form-field",20)(67,"mat-label"),n(68,"M\xE1x. Reglas de Precio"),t(),u(69,"input",26),t()(),i(70,"div",8)(71,"mat-form-field",13)(72,"mat-label"),n(73,"Tipo de Reporte"),t(),i(74,"mat-select",27)(75,"mat-option",28),n(76,"B\xE1sico"),t(),i(77,"mat-option",29),n(78,"Avanzado"),t()()(),i(79,"mat-form-field",13)(80,"mat-label"),n(81,"Tipo de Soporte"),t(),i(82,"mat-select",30)(83,"mat-option",28),n(84,"B\xE1sico"),t(),i(85,"mat-option",31),n(86,"Prioritario"),t()()()(),i(87,"div",8)(88,"mat-checkbox",32),n(89," Incluye Gesti\xF3n de Deudas "),t()()()()(),i(90,"div",33)(91,"button",34),_("click",function(){return o.onCancel()}),n(92," Cancelar "),t(),i(93,"button",35),_("click",function(){return o.onSubmit()}),f(94,bt,1,0,"mat-spinner",36)(95,Mt,2,1,"mat-icon",11),n(96),t()()()),r&2){let l,d,Z,ee;m(3),x(" ",o.data.isEdit?"Editar Plan":"Nuevo Plan"," "),m(5),p("formGroup",o.planForm),m(9),p("ngIf",(l=o.planForm.get("name"))==null?null:l.hasError("required")),m(),p("ngIf",(d=o.planForm.get("name"))==null?null:d.hasError("minlength")),m(11),p("ngIf",(Z=o.planForm.get("max_price_uf"))==null?null:Z.hasError("required")),m(),p("ngIf",(ee=o.planForm.get("max_price_uf"))==null?null:ee.hasError("min")),m(61),p("disabled",o.loading),m(2),p("disabled",o.loading||o.planForm.invalid),m(),p("ngIf",o.loading),m(),p("ngIf",!o.loading),m(),x(" ",o.data.isEdit?"Actualizar":"Crear"," ")}},dependencies:[I,y,Ne,Pe,B,ye,R,Me,De,Ie,we,Fe,ge,T,D,w,xe,j,U,V,k,N,O,A,G,H,F,Ae,Ve,z,$],styles:[".plan-form-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:90vh}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.dialog-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#111827}.close-button[_ngcontent-%COMP%]{color:#6b7280}.dialog-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:24px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#374151;margin-bottom:16px;padding-bottom:8px;border-bottom:2px solid #e5e7eb}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%], .third-width[_ngcontent-%COMP%]{flex:1}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb;background-color:#f9fafb}.inline-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}  .mat-mdc-form-field{width:100%}"]})}}return a})();var rt=(()=>{class a{constructor(e){this.http=e,this.baseUrl=`${he.authApiUrl}/api/uf`}getCurrentValue(){return this.http.get(`${this.baseUrl}/current`)}getValueByDate(e){let r=new pe().set("date",e);return this.http.get(`${this.baseUrl}/date`,{params:r})}static{this.\u0275fac=function(r){return new(r||a)(ae(ce))}}static{this.\u0275prov=ne({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function Pt(a,s){a&1&&(i(0,"th",48),n(1,"Nombre"),t())}function yt(a,s){if(a&1&&(i(0,"td",49)(1,"div",50)(2,"mat-icon",51),n(3,"card_membership"),t(),i(4,"span",52),n(5),t()()()),a&2){let e=s.$implicit;m(5),h(e.name)}}function It(a,s){a&1&&(i(0,"th",53),n(1,"Precio (UF)"),t())}function Ft(a,s){if(a&1&&(i(0,"span",56),n(1),t()),a&2){let e=c().$implicit,r=c();m(),x(" (",r.formatPriceInCLP(e.max_price_uf),") ")}}function wt(a,s){if(a&1&&(i(0,"td",49)(1,"span",54),n(2),f(3,Ft,2,1,"span",55),t()()),a&2){let e=s.$implicit,r=c();m(2),x(" ",e.max_price_uf," UF "),m(),p("ngIf",r.currentUFValue)}}function Dt(a,s){a&1&&(i(0,"th",57),n(1,"Estado"),t())}function Tt(a,s){if(a&1&&(i(0,"td",49)(1,"span"),n(2),t()()),a&2){let e=s.$implicit,r=c();m(),re("px-2 py-1 rounded text-xs font-medium status-",r.getStatusColor(e.status),""),m(),x(" ",r.getStatusText(e.status)," ")}}function kt(a,s){a&1&&(i(0,"th",58),n(1,"Caracter\xEDsticas"),t())}function Nt(a,s){if(a&1&&(i(0,"td",49)(1,"span",59),n(2),t()()),a&2){let e=s.$implicit,r=c();m(2),h(r.getFeatureSummary(e))}}function Vt(a,s){a&1&&(i(0,"th",58),n(1,"Acciones"),t())}function At(a,s){if(a&1){let e=Q();i(0,"td",49)(1,"button",60)(2,"mat-icon"),n(3,"more_vert"),t()(),i(4,"mat-menu",null,0)(6,"button",61),_("click",function(){let o=b(e).$implicit,l=c();return M(l.viewPlan(o))}),i(7,"mat-icon"),n(8,"visibility"),t(),n(9," Ver detalles "),t(),i(10,"button",61),_("click",function(){let o=b(e).$implicit,l=c();return M(l.editPlan(o))}),i(11,"mat-icon"),n(12,"edit"),t(),n(13," Editar "),t(),i(14,"button",62),_("click",function(){let o=b(e).$implicit,l=c();return M(l.deletePlan(o))}),i(15,"mat-icon"),n(16,"delete"),t(),n(17," Eliminar "),t()()()}if(a&2){let e=se(5);m(),p("matMenuTriggerFor",e)}}function Ot(a,s){a&1&&u(0,"tr",63)}function Bt(a,s){a&1&&u(0,"tr",64)}function Rt(a,s){a&1&&(i(0,"div",65),u(1,"mat-spinner",66),t())}function Ut(a,s){a&1&&(i(0,"div",67)(1,"mat-icon",68),n(2,"card_membership"),t(),i(3,"h3",69),n(4,"No hay planes registrados"),t(),i(5,"p",51),n(6,"Los planes aparecer\xE1n aqu\xED cuando se registren."),t()())}function jt(a,s){if(a&1){let e=Q();i(0,"mat-paginator",70),_("page",function(o){b(e);let l=c();return M(l.onPageChange(o))}),t()}if(a&2){let e=c();p("length",e.totalItems)("pageSize",e.pageSize)("pageIndex",e.currentPage)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",!0)}}var Pi=(()=>{class a{constructor(e,r,o,l){this.planService=e,this.ufService=r,this.dialog=o,this.snackBar=l,this._unsubscribeAll=new ie,this.plans=[],this.loading=!1,this.displayedColumns=["name","max_price_uf","status","feature_summary","actions"],this.currentUFValue=null,this.totalItems=0,this.pageSize=10,this.currentPage=0,this.pageSizeOptions=[5,10,25,50],this.sortBy="name",this.sortOrder="asc",this.filters={name:"",status:""}}ngOnInit(){this.loadPlans(),this.loadCurrentUFValue()}ngAfterViewInit(){this.sort&&this.sort.sortChange.pipe(v(this._unsubscribeAll)).subscribe(e=>{this.sortBy=e.active,this.sortOrder=e.direction==="asc"?"asc":"desc",this.currentPage=0,this.loadPlans()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadPlans(){this.loading=!0;let e=te({page:this.currentPage+1,per_page:this.pageSize,sort_by:this.sortBy,sort_order:this.sortOrder},this.filters);this.planService.getPlans(e).pipe(v(this._unsubscribeAll)).subscribe({next:r=>{this.plans=r.data?.data||[],this.totalItems=r.data?.total||0,this.loading=!1},error:r=>{console.error("Error loading plans:",r),this.loading=!1,r.status===403?this.snackBar.open("No tiene permisos para acceder a esta funcionalidad","Cerrar",{duration:5e3}):this.snackBar.open("Error al cargar planes","Cerrar",{duration:3e3})}})}getStatusColor(e){switch(e){case"ACTIVE":return"success";case"INACTIVE":return"warn";case"DISCONTINUED":return"error";default:return""}}getStatusText(e){switch(e){case"ACTIVE":return"Activo";case"INACTIVE":return"Inactivo";case"DISCONTINUED":return"Descontinuado";default:return e}}getFeatureSummary(e){if(!e.feature)return"Sin caracter\xEDsticas";let r=[];return e.feature.max_operators&&r.push(`${e.feature.max_operators} operadores`),e.feature.max_sectors&&r.push(`${e.feature.max_sectors} sectores`),e.feature.max_streets&&r.push(`${e.feature.max_streets} calles`),e.feature.includes_debt_management&&r.push("Gesti\xF3n de deudas"),e.feature.report_type==="ADVANCED"&&r.push("Reportes avanzados"),r.length>0?r.join(", "):"Sin l\xEDmites espec\xEDficos"}loadCurrentUFValue(){this.ufService.getCurrentValue().pipe(v(this._unsubscribeAll)).subscribe({next:e=>{e.success&&e.data&&(this.currentUFValue=e.data.value)},error:e=>{console.error("Error loading UF value:",e)}})}getPriceInCLP(e){return!this.currentUFValue||!e?null:e*this.currentUFValue}formatPriceInCLP(e){let r=this.getPriceInCLP(e);return r===null?"":new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(r))}get activePlansCount(){return this.plans.filter(e=>e.status==="ACTIVE").length}get inactivePlansCount(){return this.plans.filter(e=>e.status!=="ACTIVE").length}createPlan(){this.dialog.open(X,{width:"800px",maxWidth:"90vw",data:{isEdit:!1}}).afterClosed().subscribe(r=>{r&&this.loadPlans()})}editPlan(e){this.dialog.open(X,{width:"800px",maxWidth:"90vw",data:{isEdit:!0,plan:e}}).afterClosed().subscribe(o=>{o&&this.loadPlans()})}deletePlan(e){confirm(`\xBFEst\xE1 seguro de eliminar el plan ${e.name}?`)&&this.planService.deletePlan(e.id).subscribe({next:()=>{this.snackBar.open("Plan eliminado correctamente","Cerrar",{duration:3e3}),this.loadPlans()},error:r=>{this.snackBar.open("Error al eliminar plan","Cerrar",{duration:3e3})}})}viewPlan(e){let r=[{label:"Nombre",key:"name",icon:"label",type:"text"},{label:"Descripci\xF3n",key:"description",icon:"description",type:"text"},{label:"Precio M\xE1ximo (UF)",key:"max_price_uf",icon:"attach_money",type:"text",format:l=>this.getPriceInCLP(l)!==null?`${l} UF (${this.formatPriceInCLP(l)})`:`${l} UF`},{label:"Estado",key:"status",icon:"toggle_on",type:"badge",badgeColor:l=>this.getStatusColor(l)},{label:"Caracter\xEDsticas",key:"feature",icon:"settings",type:"text",format:l=>{if(!l)return"Sin caracter\xEDsticas";let d=[];return l.max_operators&&d.push(`M\xE1x. Operadores: ${l.max_operators}`),l.max_sectors&&d.push(`M\xE1x. Sectores: ${l.max_sectors}`),l.max_streets&&d.push(`M\xE1x. Calles: ${l.max_streets}`),l.max_sessions&&d.push(`M\xE1x. Sesiones: ${l.max_sessions}`),l.max_pricing_profiles&&d.push(`M\xE1x. Perfiles de Precio: ${l.max_pricing_profiles}`),l.max_pricing_rules&&d.push(`M\xE1x. Reglas de Precio: ${l.max_pricing_rules}`),l.includes_debt_management&&d.push("Gesti\xF3n de Deudas: S\xED"),l.report_type&&d.push(`Tipo de Reporte: ${l.report_type}`),l.support_type&&d.push(`Tipo de Soporte: ${l.support_type}`),d.length>0?d.join(`
`):"Sin l\xEDmites espec\xEDficos"}},{label:"Fecha de Creaci\xF3n",key:"created_at",icon:"schedule",type:"date"}],o=this.dialog.open(nt,{width:"600px",data:{title:"Detalles del Plan",data:e,fields:r,actions:[{label:"Editar",icon:"edit",color:"primary",action:()=>{o.close(),this.editPlan(e)}}]}})}applyFilters(){this.currentPage=0,this.loadPlans()}clearFilters(){this.filters={name:"",status:""},this.currentPage=0,this.loadPlans()}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadPlans()}static{this.\u0275fac=function(r){return new(r||a)(g(W),g(rt),g(_e),g(L))}}static{this.\u0275cmp=P({type:a,selectors:[["app-plans"]],viewQuery:function(r,o){if(r&1&&oe(q,5),r&2){let l;le(l=me())&&(o.sort=l.first)}},features:[de([{provide:We,useValue:it()}])],decls:97,vars:13,consts:[["menu","matMenu"],[1,"p-6","w-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],["mat-raised-button","","color","primary",1,"rounded-sm",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-6"],[1,"p-6"],[1,"flex","items-center"],[1,"p-3","bg-blue-100","rounded-full"],[1,"text-blue-600"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"p-3","bg-green-100","rounded-full"],[1,"text-green-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"p-3","bg-orange-100","rounded-full"],[1,"text-orange-600"],[1,"text-2xl","font-bold","text-orange-600"],[1,"mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","placeholder","Nombre del plan",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value",""],["value","ACTIVE"],["value","INACTIVE"],["value","DISCONTINUED"],[1,"flex","justify-end","gap-2","mt-4"],["mat-stroked-button","",1,"rounded-sm",3,"click"],[1,"overflow-x-auto"],["mat-table","","matSort","",1,"w-full",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","name",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","max_price_uf"],["mat-header-cell","","mat-sort-header","max_price_uf",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","status",4,"matHeaderCellDef"],["matColumnDef","feature_summary"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","mt-4",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["mat-header-cell","","mat-sort-header","name"],["mat-cell",""],[1,"flex","items-center","gap-2"],[1,"text-gray-500"],[1,"font-semibold"],["mat-header-cell","","mat-sort-header","max_price_uf"],[1,"text-gray-600","font-mono"],["class","text-gray-500 text-sm",4,"ngIf"],[1,"text-gray-500","text-sm"],["mat-header-cell","","mat-sort-header","status"],["mat-header-cell",""],[1,"text-gray-600","text-sm"],["mat-icon-button","",1,"rounded-sm",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"text-red-600",3,"click"],["mat-header-row",""],["mat-row",""],[1,"flex","justify-center","items-center","py-8"],["diameter","40"],[1,"text-center","py-8"],[1,"text-gray-400","text-6xl"],[1,"text-lg","font-medium","text-gray-900","mt-4"],[1,"mt-4",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"]],template:function(r,o){r&1&&(i(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),n(4,"Planes"),t(),i(5,"p",4),n(6,"Gestiona los planes del sistema"),t()(),i(7,"button",5),_("click",function(){return o.createPlan()}),i(8,"mat-icon"),n(9,"add"),t(),n(10," Nuevo Plan "),t()(),i(11,"div",6)(12,"mat-card")(13,"mat-card-content",7)(14,"div",8)(15,"div",9)(16,"mat-icon",10),n(17,"card_membership"),t()(),i(18,"div",11)(19,"p",12),n(20,"Total Planes"),t(),i(21,"p",13),n(22),t()()()()(),i(23,"mat-card")(24,"mat-card-content",7)(25,"div",8)(26,"div",14)(27,"mat-icon",15),n(28,"check_circle"),t()(),i(29,"div",11)(30,"p",12),n(31,"Activos"),t(),i(32,"p",16),n(33),t()()()()(),i(34,"mat-card")(35,"mat-card-content",7)(36,"div",8)(37,"div",17)(38,"mat-icon",18),n(39,"info"),t()(),i(40,"div",11)(41,"p",12),n(42,"Inactivos"),t(),i(43,"p",19),n(44),t()()()()()(),i(45,"mat-card",20)(46,"mat-card-content",7)(47,"div",21)(48,"mat-form-field",22)(49,"mat-label"),n(50,"Buscar plan"),t(),i(51,"input",23),K("ngModelChange",function(d){return J(o.filters.name,d)||(o.filters.name=d),d}),t()(),i(52,"mat-form-field",22)(53,"mat-label"),n(54,"Estado"),t(),i(55,"mat-select",24),K("ngModelChange",function(d){return J(o.filters.status,d)||(o.filters.status=d),d}),i(56,"mat-option",25),n(57,"Todos"),t(),i(58,"mat-option",26),n(59,"Activo"),t(),i(60,"mat-option",27),n(61,"Inactivo"),t(),i(62,"mat-option",28),n(63,"Descontinuado"),t()()()(),i(64,"div",29)(65,"button",30),_("click",function(){return o.clearFilters()}),i(66,"mat-icon"),n(67,"clear"),t(),n(68," Limpiar "),t(),i(69,"button",5),_("click",function(){return o.applyFilters()}),i(70,"mat-icon"),n(71,"search"),t(),n(72," Filtrar "),t()()()(),i(73,"mat-card")(74,"mat-card-content",7)(75,"div",31)(76,"table",32),C(77,33),f(78,Pt,2,0,"th",34)(79,yt,6,1,"td",35),E(),C(80,36),f(81,It,2,0,"th",37)(82,wt,4,2,"td",35),E(),C(83,38),f(84,Dt,2,0,"th",39)(85,Tt,3,4,"td",35),E(),C(86,40),f(87,kt,2,0,"th",41)(88,Nt,3,1,"td",35),E(),C(89,42),f(90,Vt,2,0,"th",41)(91,At,18,1,"td",35),E(),f(92,Ot,1,0,"tr",43)(93,Bt,1,0,"tr",44),t(),f(94,Rt,2,0,"div",45)(95,Ut,7,0,"div",46),t(),f(96,jt,1,5,"mat-paginator",47),t()()()),r&2&&(m(22),h(o.plans.length),m(11),h(o.activePlansCount),m(11),h(o.inactivePlansCount),m(7),Y("ngModel",o.filters.name),m(4),Y("ngModel",o.filters.status),m(21),p("dataSource",o.plans)("matSortActive",o.sortBy)("matSortDirection",o.sortOrder),m(16),p("matHeaderRowDef",o.displayedColumns),m(),p("matRowDefColumns",o.displayedColumns),m(),p("ngIf",o.loading),m(),p("ngIf",!o.loading&&o.plans.length===0),m(),p("ngIf",o.totalItems>0))},dependencies:[I,y,ke,B,R,ve,qe,Oe,Re,ze,Ue,Be,Le,je,$e,He,Ge,tt,Ze,et,V,k,N,O,A,z,$,T,D,w,j,U,be,Ee,Ce,Se,Xe,G,H,F,Ye,Qe,Ke,q,Je],styles:[".status-success[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.status-warn[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.status-error[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}"]})}}return a})();export{Pi as PlansComponent};
