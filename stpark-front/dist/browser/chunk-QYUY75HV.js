import{a as H}from"./chunk-63BNSDKB.js";import{a as U,b as $,c as q,d as J,e as K,f as Q}from"./chunk-XQK4L4ZU.js";import{a as j,b as B,c as L,d as z}from"./chunk-CYULJBIT.js";import{a as G,b as N}from"./chunk-3TK3OLOO.js";import"./chunk-YGRHM56X.js";import"./chunk-VKB6BRO6.js";import{b as I,c as O}from"./chunk-WP7DXJZF.js";import{b as P}from"./chunk-4LV3ZYQA.js";import{b as k,f as y,j as C,k as R,o as A,p as F}from"./chunk-4UMW4R4I.js";import"./chunk-EGGCURRC.js";import{W as M,ea as w,ka as D,ma as T,na as V}from"./chunk-HOABDKFW.js";import"./chunk-CQGOYTFO.js";import"./chunk-7OGW3PNS.js";import{s as v}from"./chunk-TQARHOKX.js";import{$b as d,Eb as p,Pb as e,Qb as t,Rb as f,U as _,Vb as h,bb as s,cb as S,f as b,lc as g,mc as i,nc as x,oa as l,pa as m,pb as E}from"./chunk-BSJZAB7M.js";import"./chunk-TSRGIXR5.js";var be=(()=>{class c{constructor(a){this.reportService=a,this._unsubscribeAll=new b,this.loading=!1,this.dashboardData=null}ngOnInit(){this.loadDashboardData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadDashboardData(){this.loading=!0,this.reportService.getDashboard().pipe(_(this._unsubscribeAll)).subscribe({next:a=>{this.dashboardData=a.data,this.loading=!1},error:a=>{console.error("Error loading dashboard data:",a),this.loading=!1}})}generateReport(a){console.log("Generating report:",a)}exportReport(a){console.log("Exporting report:",a)}getTotalSales(){return this.dashboardData?.today_sales?.total_amount?new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(this.dashboardData.today_sales.total_amount):"$0"}getTotalPayments(){return this.dashboardData?.today_payments?.count||0}getTotalDebts(){return this.dashboardData?.pending_debts?.count||0}static{this.\u0275fac=function(u){return new(u||c)(S(H))}}static{this.\u0275cmp=E({type:c,selectors:[["app-reports"]],decls:161,vars:7,consts:[["picker1",""],["picker2",""],[1,"p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"hover:shadow-lg","transition-shadow","cursor-pointer",3,"click"],[1,"flex","items-center","mb-4"],[1,"p-3","bg-green-100","rounded-full"],[1,"text-green-600"],[1,"ml-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-green-600"],["mat-icon-button","",3,"click"],[1,"p-3","bg-blue-100","rounded-full"],[1,"text-blue-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"p-3","bg-red-100","rounded-full"],[1,"text-red-600"],[1,"text-2xl","font-bold","text-red-600"],[1,"p-3","bg-purple-100","rounded-full"],[1,"text-purple-600"],[1,"text-2xl","font-bold","text-purple-600"],["mat-icon-button",""],[1,"p-3","bg-orange-100","rounded-full"],[1,"text-orange-600"],[1,"text-2xl","font-bold","text-orange-600"],[1,"p-3","bg-gray-100","rounded-full"],[1,"text-2xl","font-bold","text-gray-600"],[1,"mt-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],["appearance","outline"],["matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["value",""],["value","1"],["value","2"],[1,"flex","justify-end","gap-4","mt-6"],["mat-stroked-button",""],["mat-raised-button","","color","primary"]],template:function(u,n){if(u&1){let r=h();e(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),i(4,"Reportes"),t(),e(5,"p",5),i(6,"Genera y exporta reportes del sistema"),t()()(),e(7,"div",6)(8,"mat-card",7),d("click",function(){return l(r),m(n.generateReport("sales"))}),e(9,"mat-card-content",2)(10,"div",8)(11,"div",9)(12,"mat-icon",10),i(13,"trending_up"),t()(),e(14,"div",11)(15,"h3",12),i(16,"Reporte de Ventas"),t(),e(17,"p",13),i(18,"An\xE1lisis de ventas por per\xEDodo"),t()()(),e(19,"div",14)(20,"span",15),i(21),t(),e(22,"button",16),d("click",function(){return l(r),m(n.exportReport("sales"))}),e(23,"mat-icon"),i(24,"download"),t()()()()(),e(25,"mat-card",7),d("click",function(){return l(r),m(n.generateReport("payments"))}),e(26,"mat-card-content",2)(27,"div",8)(28,"div",17)(29,"mat-icon",18),i(30,"payment"),t()(),e(31,"div",11)(32,"h3",12),i(33,"Reporte de Pagos"),t(),e(34,"p",13),i(35,"An\xE1lisis de m\xE9todos de pago"),t()()(),e(36,"div",14)(37,"span",19),i(38),t(),e(39,"button",16),d("click",function(){return l(r),m(n.exportReport("payments"))}),e(40,"mat-icon"),i(41,"download"),t()()()()(),e(42,"mat-card",7),d("click",function(){return l(r),m(n.generateReport("debts"))}),e(43,"mat-card-content",2)(44,"div",8)(45,"div",20)(46,"mat-icon",21),i(47,"account_balance_wallet"),t()(),e(48,"div",11)(49,"h3",12),i(50,"Reporte de Deudas"),t(),e(51,"p",13),i(52,"An\xE1lisis de deudas pendientes"),t()()(),e(53,"div",14)(54,"span",22),i(55),t(),e(56,"button",16),d("click",function(){return l(r),m(n.exportReport("debts"))}),e(57,"mat-icon"),i(58,"download"),t()()()()(),e(59,"mat-card",7),d("click",function(){return l(r),m(n.generateReport("operator"))}),e(60,"mat-card-content",2)(61,"div",8)(62,"div",23)(63,"mat-icon",24),i(64,"people"),t()(),e(65,"div",11)(66,"h3",12),i(67,"Reporte por Operador"),t(),e(68,"p",13),i(69,"Rendimiento por operador"),t()()(),e(70,"div",14)(71,"span",25),i(72,"0"),t(),e(73,"button",26)(74,"mat-icon"),i(75,"download"),t()()()()(),e(76,"mat-card",7),d("click",function(){return l(r),m(n.generateReport("sessions"))}),e(77,"mat-card-content",2)(78,"div",8)(79,"div",27)(80,"mat-icon",28),i(81,"schedule"),t()(),e(82,"div",11)(83,"h3",12),i(84,"Reporte de Sesiones"),t(),e(85,"p",13),i(86,"An\xE1lisis de uso por sector"),t()()(),e(87,"div",14)(88,"span",29),i(89,"0"),t(),e(90,"button",26)(91,"mat-icon"),i(92,"download"),t()()()()(),e(93,"mat-card",7),d("click",function(){return l(r),m(n.generateReport("dashboard"))}),e(94,"mat-card-content",2)(95,"div",8)(96,"div",30)(97,"mat-icon",5),i(98,"dashboard"),t()(),e(99,"div",11)(100,"h3",12),i(101,"Dashboard Completo"),t(),e(102,"p",13),i(103,"Resumen general del sistema"),t()()(),e(104,"div",14)(105,"span",31),i(106,"\u{1F4CA}"),t(),e(107,"button",26)(108,"mat-icon"),i(109,"download"),t()()()()()(),e(110,"mat-card",32)(111,"mat-card-header")(112,"mat-card-title"),i(113,"Filtros de Reporte"),t(),e(114,"mat-card-subtitle"),i(115,"Configura los par\xE1metros para generar reportes personalizados"),t()(),e(116,"mat-card-content",2)(117,"div",33)(118,"mat-form-field",34)(119,"mat-label"),i(120,"Fecha desde"),t(),f(121,"input",35)(122,"mat-datepicker-toggle",36)(123,"mat-datepicker",null,0),t(),e(125,"mat-form-field",34)(126,"mat-label"),i(127,"Fecha hasta"),t(),f(128,"input",35)(129,"mat-datepicker-toggle",36)(130,"mat-datepicker",null,1),t(),e(132,"mat-form-field",34)(133,"mat-label"),i(134,"Sector"),t(),e(135,"mat-select")(136,"mat-option",37),i(137,"Todos los sectores"),t(),e(138,"mat-option",38),i(139,"Sector 1"),t(),e(140,"mat-option",39),i(141,"Sector 2"),t()()(),e(142,"mat-form-field",34)(143,"mat-label"),i(144,"Operador"),t(),e(145,"mat-select")(146,"mat-option",37),i(147,"Todos los operadores"),t(),e(148,"mat-option",38),i(149,"Operador 1"),t(),e(150,"mat-option",39),i(151,"Operador 2"),t()()()(),e(152,"div",40)(153,"button",41)(154,"mat-icon"),i(155,"refresh"),t(),i(156," Actualizar "),t(),e(157,"button",42)(158,"mat-icon"),i(159,"file_download"),t(),i(160," Exportar Todos "),t()()()()()}if(u&2){let r=g(124),o=g(131);s(21),x(n.getTotalSales()),s(17),x(n.getTotalPayments()),s(17),x(n.getTotalDebts()),s(66),p("matDatepicker",r),s(),p("for",r),s(6),p("matDatepicker",o),s(),p("for",o)}},dependencies:[v,Q,U,q,K,J,$,V,D,T,O,I,P,R,C,k,y,F,A,z,j,B,L,N,G,w,M],styles:[".mat-mdc-card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:box-shadow .3s ease}.mat-mdc-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 25px #00000026}@media (max-width: 768px){.grid-cols-3[_ngcontent-%COMP%], .grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return c})();export{be as ReportsComponent};
