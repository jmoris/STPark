import{a as ve}from"./chunk-TGLYR4EM.js";import{a as Fe}from"./chunk-N3LDMRIB.js";import{a as fe,b as he,c as ge,d as xe}from"./chunk-EEUJEGPN.js";import{a as ke}from"./chunk-ZMFSOZJA.js";import{a as Re,b as Se,c as Ce,d as ye,e as be,f as Ee,g as Te,h as De,i as Me,j as we,k as Ie}from"./chunk-Y6UNS2UZ.js";import{a as de,b as se,c as me,d as ce,e as _e,f as ue}from"./chunk-N7KP3IEB.js";import{b as Z}from"./chunk-FSA3IEFI.js";import{a as le,b as pe}from"./chunk-POSCZER2.js";import"./chunk-ECYJLMJT.js";import"./chunk-VKB6BRO6.js";import{b as Q,c as X}from"./chunk-IMRKXFOQ.js";import{d as ne,e as oe}from"./chunk-5Q7CCL6V.js";import{b as z,f as G,j as Y,k as q}from"./chunk-K3BNOLHS.js";import{b as ae}from"./chunk-CWSZZ2DY.js";import{b as ee,f as te,j as ie,z as re}from"./chunk-ZTFUS4RN.js";import{W as L,fa as j,la as U,na as J,oa as K}from"./chunk-QQQ5XT6I.js";import"./chunk-YXFY4UXK.js";import"./chunk-EARUC3FY.js";import{l as W,m as H,p as B,s as $}from"./chunk-BAM5RHC5.js";import{$b as S,Eb as d,Fc as T,Gb as I,Hc as D,Lc as N,Pb as i,Qb as r,Rb as v,Sb as f,Tb as h,U as w,Vb as V,bb as a,bc as C,cb as M,f as P,lc as k,mc as n,nc as u,oa as g,oc as F,pa as x,pb as O,pc as A,rc as y,sc as b,tc as E,vc as R,wb as c}from"./chunk-MLNNMN4J.js";import"./chunk-TSRGIXR5.js";var Oe=()=>[],Ae=()=>["operator","plate","started_at","ended_at","sector","duration","amount"],Pe=()=>["plate","sector","operator","principal_amount","status","created_at"];function Ve(e,o){e&1&&v(0,"div",40)}function Ne(e,o){e&1&&v(0,"div",40)}function We(e,o){e&1&&v(0,"div",40)}function He(e,o){if(e&1&&(i(0,"mat-option",34),n(1),r()),e&2){let t=o.$implicit;d("value",t.id),a(),u(t.name)}}function Be(e,o){if(e&1&&(i(0,"mat-option",34),n(1),r()),e&2){let t=o.$implicit;d("value",t.id),a(),u(t.name)}}function $e(e,o){e&1&&(i(0,"span"),n(1,"Resultados - Reporte de Ventas"),r())}function Le(e,o){e&1&&(i(0,"span"),n(1,"Resultados - Reporte de Deudas"),r())}function je(e,o){e&1&&(i(0,"span"),n(1,"Resultados - Reporte por Operador"),r())}function ze(e,o){e&1&&(i(0,"th",63),n(1,"Placa"),r())}function Ge(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u(t.plate)}}function Ye(e,o){e&1&&(i(0,"th",63),n(1,"Fecha Inicio"),r())}function qe(e,o){if(e&1&&(i(0,"td",64),n(1),T(2,"date"),r()),e&2){let t=o.$implicit;a(),u(D(2,1,t.started_at,"dd/MM/yyyy HH:mm"))}}function Ue(e,o){e&1&&(i(0,"th",63),n(1,"Fecha Fin"),r())}function Je(e,o){if(e&1&&(i(0,"td",64),n(1),T(2,"date"),r()),e&2){let t=o.$implicit;a(),u(D(2,1,t.ended_at,"dd/MM/yyyy HH:mm"))}}function Ke(e,o){e&1&&(i(0,"th",63),n(1,"Sector"),r())}function Qe(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u(t.sector)}}function Xe(e,o){e&1&&(i(0,"th",63),n(1,"Operador"),r())}function Ze(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u(t.operator)}}function et(e,o){e&1&&(i(0,"th",63),n(1,"Duraci\xF3n"),r())}function tt(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u(t.duration_formatted||"N/A")}}function it(e,o){e&1&&(i(0,"th",63),n(1,"Monto"),r())}function rt(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit,m=C(3);a(),u(m.reportService.formatAmount(t.amount||0))}}function nt(e,o){e&1&&v(0,"tr",65)}function ot(e,o){e&1&&v(0,"tr",66)}function at(e,o){e&1&&(i(0,"div",67)(1,"p",68),n(2,"No hay datos para mostrar"),r()())}function lt(e,o){if(e&1&&(i(0,"div",49)(1,"table",50),f(2,51),c(3,ze,2,0,"th",52)(4,Ge,2,1,"td",53),h(),f(5,54),c(6,Ye,2,0,"th",52)(7,qe,3,4,"td",53),h(),f(8,55),c(9,Ue,2,0,"th",52)(10,Je,3,4,"td",53),h(),f(11,56),c(12,Ke,2,0,"th",52)(13,Qe,2,1,"td",53),h(),f(14,57),c(15,Xe,2,0,"th",52)(16,Ze,2,1,"td",53),h(),f(17,58),c(18,et,2,0,"th",52)(19,tt,2,1,"td",53),h(),f(20,59),c(21,it,2,0,"th",52)(22,rt,2,1,"td",53),h(),c(23,nt,1,0,"tr",60)(24,ot,1,0,"tr",61),r(),c(25,at,3,0,"div",62),r()),e&2){let t=C(2);a(),d("dataSource",t.currentReport.sessions||R(4,Oe)),a(22),d("matHeaderRowDef",R(5,Ae)),a(),d("matRowDefColumns",R(6,Ae)),a(),d("ngIf",!t.currentReport.sessions||t.currentReport.sessions.length===0)}}function pt(e,o){e&1&&(i(0,"th",63),n(1,"Patente"),r())}function dt(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u((t.parkingSession==null?null:t.parkingSession.plate)||"N/A")}}function st(e,o){e&1&&(i(0,"th",63),n(1,"Sector"),r())}function mt(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u((t.parkingSession==null||t.parkingSession.sector==null?null:t.parkingSession.sector.name)||"N/A")}}function ct(e,o){e&1&&(i(0,"th",63),n(1,"Operador"),r())}function _t(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit;a(),u((t.parkingSession==null||t.parkingSession.operator==null?null:t.parkingSession.operator.name)||"N/A")}}function ut(e,o){e&1&&(i(0,"th",63),n(1,"Monto"),r())}function ft(e,o){if(e&1&&(i(0,"td",64),n(1),r()),e&2){let t=o.$implicit,m=C(3);a(),u(m.reportService.formatAmount(t.principal_amount||0))}}function ht(e,o){e&1&&(i(0,"th",63),n(1,"Estado"),r())}function gt(e,o){e&1&&(i(0,"span",75),n(1,"Pendiente"),r())}function xt(e,o){e&1&&(i(0,"span",76),n(1,"Liquidada"),r())}function vt(e,o){e&1&&(i(0,"span",77),n(1,"Cancelada"),r())}function Rt(e,o){if(e&1&&(i(0,"td",64),c(1,gt,2,0,"span",72)(2,xt,2,0,"span",73)(3,vt,2,0,"span",74),r()),e&2){let t=o.$implicit;a(),d("ngIf",t.status==="PENDING"),a(),d("ngIf",t.status==="SETTLED"),a(),d("ngIf",t.status==="CANCELLED")}}function St(e,o){e&1&&(i(0,"th",63),n(1,"Fecha"),r())}function Ct(e,o){if(e&1&&(i(0,"td",64),n(1),T(2,"date"),r()),e&2){let t=o.$implicit;a(),u(D(2,1,t.created_at,"dd/MM/yyyy HH:mm"))}}function yt(e,o){e&1&&v(0,"tr",65)}function bt(e,o){e&1&&v(0,"tr",66)}function Et(e,o){e&1&&(i(0,"div",67)(1,"p",68),n(2,"No hay datos para mostrar"),r()())}function Tt(e,o){if(e&1&&(i(0,"div",49)(1,"table",50),f(2,51),c(3,pt,2,0,"th",52)(4,dt,2,1,"td",53),h(),f(5,56),c(6,st,2,0,"th",52)(7,mt,2,1,"td",53),h(),f(8,57),c(9,ct,2,0,"th",52)(10,_t,2,1,"td",53),h(),f(11,69),c(12,ut,2,0,"th",52)(13,ft,2,1,"td",53),h(),f(14,70),c(15,ht,2,0,"th",52)(16,Rt,4,3,"td",53),h(),f(17,71),c(18,St,2,0,"th",52)(19,Ct,3,4,"td",53),h(),c(20,yt,1,0,"tr",60)(21,bt,1,0,"tr",61),r(),c(22,Et,3,0,"div",62),r()),e&2){let t=C(2);a(),d("dataSource",t.currentReport.debts||R(4,Oe)),a(19),d("matHeaderRowDef",R(5,Pe)),a(),d("matRowDefColumns",R(6,Pe)),a(),d("ngIf",!t.currentReport.debts||t.currentReport.debts.length===0)}}function Dt(e,o){if(e&1&&(i(0,"mat-card",25)(1,"mat-card-header")(2,"mat-card-title"),c(3,$e,2,0,"span",41)(4,Le,2,0,"span",41)(5,je,2,0,"span",41),r(),i(6,"mat-card-subtitle"),n(7),T(8,"date"),T(9,"date"),r()(),i(10,"mat-card-content",9)(11,"div",42)(12,"div",43)(13,"p",15),n(14,"Total Registros"),r(),i(15,"p",44),n(16),r()(),i(17,"div",45)(18,"p",15),n(19,"Monto Total"),r(),i(20,"p",17),n(21),r()(),i(22,"div",46)(23,"p",15),n(24,"Per\xEDodo"),r(),i(25,"p",47),n(26),r()()(),c(27,lt,26,7,"div",48)(28,Tt,23,7,"div",48),r()()),e&2){let t=C();a(3),d("ngIf",t.currentReportType==="sales"),a(),d("ngIf",t.currentReportType==="debts"),a(),d("ngIf",t.currentReportType==="operator"),a(2),A(" Per\xEDodo: ",D(8,11,t.filters.date_from,"dd/MM/yyyy")," - ",D(9,14,t.filters.date_to,"dd/MM/yyyy")," "),a(9),F(" ",t.currentReport.total_sales||t.currentReport.total_sessions||t.currentReport.total_debts||0," "),a(5),F(" ",t.reportService.formatAmount(t.currentReport.total_amount||0)," "),a(5),A(" ",t.currentReport.period==null?null:t.currentReport.period.from," - ",t.currentReport.period==null?null:t.currentReport.period.to," "),a(),d("ngIf",t.currentReportType==="sales"),a(),d("ngIf",t.currentReportType==="debts")}}var ri=(()=>{class e{constructor(t,m,l,s){this.reportService=t,this.sectorService=m,this.operatorService=l,this.cdr=s,this._unsubscribeAll=new P,this.loading=!1,this.dashboardData=null,this.filters={date_from:new Date(new Date().setDate(new Date().getDate()-7)),date_to:new Date,sector_id:void 0,operator_id:void 0},this.selectedReportType="sales",this.sectors=[],this.operators=[],this.currentReport=null,this.currentReportType="",this.displayedColumns=["operator","plate","started_at","ended_at","sector","duration","amount"]}ngOnInit(){this.loadDashboardData(),this.loadFiltersData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadDashboardData(){this.loading=!0,this.reportService.getDashboard().pipe(w(this._unsubscribeAll)).subscribe({next:t=>{this.dashboardData=t.data,this.loading=!1},error:t=>{console.error("Error loading dashboard data:",t),this.loading=!1}})}loadFiltersData(){this.sectorService.getSectors().subscribe({next:t=>{this.sectors=t.data.data||[]},error:t=>console.error("Error loading sectors:",t)}),this.operatorService.getAllOperators().subscribe({next:t=>{this.operators=t.data||[]},error:t=>console.error("Error loading operators:",t)})}onCardClick(t){this.selectedReportType=t}formatDateForApi(t,m=!1){let l,s,_;if(t instanceof Date)l=String(t.getFullYear()),s=String(t.getMonth()+1).padStart(2,"0"),_=String(t.getDate()).padStart(2,"0");else if(typeof t=="string")if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let p=t.split("-");l=p[0],s=p[1],_=p[2]}else{let p=new Date(t);if(!isNaN(p.getTime()))l=String(p.getFullYear()),s=String(p.getMonth()+1).padStart(2,"0"),_=String(p.getDate()).padStart(2,"0");else return t}else return"";return m?`${l}-${s}-${_} 23:59:59`:`${l}-${s}-${_} 00:00:00`}generateReportFromFilters(){this.generateReport(this.selectedReportType)}generateReport(t){this.currentReportType=t,this.loading=!0;let m={date_from:this.formatDateForApi(this.filters.date_from,!1),date_to:this.formatDateForApi(this.filters.date_to,!0)};this.filters.sector_id&&(m.sector_id=this.filters.sector_id),this.filters.operator_id&&(m.operator_id=this.filters.operator_id);let l;switch(t){case"sales":l=this.reportService.getSalesReport(m);break;case"debts":l=this.reportService.getDebtsReport(m);break;case"operator":if(!m.operator_id){alert("Debe seleccionar un operador"),this.loading=!1;return}l=this.reportService.getOperatorReport(m);break;default:this.loading=!1;return}l.pipe(w(this._unsubscribeAll)).subscribe({next:s=>{this.currentReport=s.data,this.loading=!1,this.cdr.detectChanges()},error:s=>{console.error("Error generating report:",s),this.loading=!1}})}exportReport(t){if(this.currentReport&&this.currentReportType===t){this.exportCurrentReport();return}this.currentReportType=t,this.loading=!0;let m={date_from:this.formatDateForApi(this.filters.date_from,!1),date_to:this.formatDateForApi(this.filters.date_to,!0)};this.filters.sector_id&&(m.sector_id=this.filters.sector_id),this.filters.operator_id&&(m.operator_id=this.filters.operator_id);let l;switch(t){case"sales":l=this.reportService.getSalesReport(m);break;case"debts":l=this.reportService.getDebtsReport(m);break;case"operator":if(!m.operator_id){alert("Debe seleccionar un operador"),this.loading=!1;return}l=this.reportService.getOperatorReport(m);break;default:this.loading=!1;return}l.pipe(w(this._unsubscribeAll)).subscribe({next:s=>{this.currentReport=s.data,this.loading=!1,this.cdr.detectChanges(),this.exportCurrentReport()},error:s=>{console.error("Error generating report:",s),this.loading=!1}})}exportCurrentReport(){if(!this.currentReport)return;let t={date_from:this.formatDateForApi(this.filters.date_from,!1),date_to:this.formatDateForApi(this.filters.date_to,!0)};this.filters.sector_id&&(t.sector_id=this.filters.sector_id),this.filters.operator_id&&(t.operator_id=this.filters.operator_id),this.reportService.exportToPdf(this.currentReportType,t)}clearFilters(){this.filters={date_from:new Date(new Date().setDate(new Date().getDate()-7)),date_to:new Date,sector_id:void 0,operator_id:void 0},this.currentReport=null,this.currentReportType=""}getTotalSales(){return this.currentReport&&this.currentReportType==="sales"?this.reportService.formatAmount(this.currentReport.total_amount||0):this.dashboardData?.today_sales?.total_amount?this.reportService.formatAmount(this.dashboardData.today_sales.total_amount):"$0"}getTotalPayments(){return this.currentReport&&this.currentReportType==="payments"?this.currentReport.total_payments||0:this.dashboardData?.today_payments?.count||0}getTotalDebts(){return this.currentReport&&this.currentReportType==="debts"?this.currentReport.total_debts||0:this.dashboardData?.pending_debts?.count||0}getTotalDebtsAmount(){return this.currentReport&&this.currentReportType==="debts"?this.reportService.formatAmount(this.currentReport.total_amount||0):this.dashboardData?.pending_debts?.total_amount?this.reportService.formatAmount(this.dashboardData.pending_debts.total_amount):"$0"}getOperatorCount(){return this.currentReport&&this.currentReportType==="operator"&&this.currentReport.sessions?.total||0}getSessionsCount(){return this.currentReport&&this.currentReportType==="sessions"?(this.currentReport.total_sessions||0).toString():this.dashboardData?.active_sessions?.count!==void 0?this.dashboardData.active_sessions.count.toString():"0"}getPaymentMethodLabel(t){return{CASH:"Efectivo",CARD:"Tarjeta",WEBPAY:"Webpay",TRANSFER:"Transferencia"}[t]||t}static{this.\u0275fac=function(m){return new(m||e)(M(ve),M(ke),M(Fe),M(N))}}static{this.\u0275cmp=O({type:e,selectors:[["app-reports"]],decls:118,vars:32,consts:[["picker1",""],["picker2",""],[1,"p-6","w-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"relative","hover:shadow-lg","transition-all"],["class","absolute inset-0 bg-gray-300 bg-opacity-30 z-10 rounded-lg",4,"ngIf"],[1,"p-6"],[1,"flex","items-center","mb-4"],[1,"p-3","bg-green-100","rounded-full"],[1,"text-green-600"],[1,"ml-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-green-600"],["mat-icon-button","",3,"click"],[1,"p-3","bg-red-100","rounded-full"],[1,"text-red-600"],[1,"text-2xl","font-bold","text-red-600"],[1,"p-3","bg-purple-100","rounded-full"],[1,"text-purple-600"],[1,"text-2xl","font-bold","text-purple-600"],[1,"mt-6"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-4"],["appearance","outline"],[3,"ngModelChange","ngModel"],["value","sales"],["value","debts"],["value","operator"],["matInput","","type","text","placeholder","dd/mm/yyyy",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","gap-4","mt-6"],["mat-stroked-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["class","mt-6",4,"ngIf"],[1,"absolute","inset-0","bg-gray-300","bg-opacity-30","z-10","rounded-lg"],[4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-6"],[1,"bg-blue-50","p-4","rounded-lg"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-green-50","p-4","rounded-lg"],[1,"bg-purple-50","p-4","rounded-lg"],[1,"text-lg","font-semibold","text-purple-600"],["class","overflow-x-auto",4,"ngIf"],[1,"overflow-x-auto"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","plate"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","started_at"],["matColumnDef","ended_at"],["matColumnDef","sector"],["matColumnDef","operator"],["matColumnDef","duration"],["matColumnDef","amount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center py-8",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"text-center","py-8"],[1,"text-gray-500"],["matColumnDef","principal_amount"],["matColumnDef","status"],["matColumnDef","created_at"],["class","px-2 py-1 text-xs font-semibold rounded bg-yellow-100 text-yellow-800",4,"ngIf"],["class","px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800",4,"ngIf"],["class","px-2 py-1 text-xs font-semibold rounded bg-red-100 text-red-800",4,"ngIf"],[1,"px-2","py-1","text-xs","font-semibold","rounded","bg-yellow-100","text-yellow-800"],[1,"px-2","py-1","text-xs","font-semibold","rounded","bg-green-100","text-green-800"],[1,"px-2","py-1","text-xs","font-semibold","rounded","bg-red-100","text-red-800"]],template:function(m,l){if(m&1){let s=V();i(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),n(4,"Reportes"),r(),i(5,"p",5),n(6,"Genera y exporta reportes del sistema"),r()()(),i(7,"div",6)(8,"mat-card",7),c(9,Ve,1,0,"div",8),i(10,"mat-card-content",9)(11,"div",10)(12,"div",11)(13,"mat-icon",12),n(14,"trending_up"),r()(),i(15,"div",13)(16,"h3",14),n(17,"Reporte de Ventas"),r(),i(18,"p",15),n(19,"An\xE1lisis de ventas por per\xEDodo"),r()()(),i(20,"div",16)(21,"span",17),n(22),r(),i(23,"button",18),S("click",function(p){return g(s),l.exportReport("sales"),x(p.stopPropagation())}),i(24,"mat-icon"),n(25,"download"),r()()()()(),i(26,"mat-card",7),c(27,Ne,1,0,"div",8),i(28,"mat-card-content",9)(29,"div",10)(30,"div",19)(31,"mat-icon",20),n(32,"account_balance_wallet"),r()(),i(33,"div",13)(34,"h3",14),n(35,"Reporte de Deudas"),r(),i(36,"p",15),n(37,"An\xE1lisis de deudas pendientes"),r()()(),i(38,"div",16)(39,"span",21),n(40),r(),i(41,"button",18),S("click",function(p){return g(s),l.exportReport("debts"),x(p.stopPropagation())}),i(42,"mat-icon"),n(43,"download"),r()()()()(),i(44,"mat-card",7),c(45,We,1,0,"div",8),i(46,"mat-card-content",9)(47,"div",10)(48,"div",22)(49,"mat-icon",23),n(50,"people"),r()(),i(51,"div",13)(52,"h3",14),n(53,"Reporte por Operador"),r(),i(54,"p",15),n(55,"Rendimiento por operador"),r()()(),i(56,"div",16)(57,"span",24),n(58),r(),i(59,"button",18),S("click",function(p){return g(s),l.exportReport("operator"),x(p.stopPropagation())}),i(60,"mat-icon"),n(61,"download"),r()()()()()(),i(62,"mat-card",25)(63,"mat-card-header")(64,"mat-card-title"),n(65,"Filtros de Reporte"),r(),i(66,"mat-card-subtitle"),n(67,"Configura los par\xE1metros para generar reportes personalizados"),r()(),i(68,"mat-card-content",9)(69,"div",26)(70,"mat-form-field",27)(71,"mat-label"),n(72,"Tipo de Reporte"),r(),i(73,"mat-select",28),E("ngModelChange",function(p){return g(s),b(l.selectedReportType,p)||(l.selectedReportType=p),x(p)}),i(74,"mat-option",29),n(75,"Reporte de Ventas"),r(),i(76,"mat-option",30),n(77,"Reporte de Deudas"),r(),i(78,"mat-option",31),n(79,"Reporte por Operador"),r()()(),i(80,"mat-form-field",27)(81,"mat-label"),n(82,"Fecha desde"),r(),i(83,"input",32),E("ngModelChange",function(p){return g(s),b(l.filters.date_from,p)||(l.filters.date_from=p),x(p)}),r(),v(84,"mat-datepicker-toggle",33)(85,"mat-datepicker",null,0),r(),i(87,"mat-form-field",27)(88,"mat-label"),n(89,"Fecha hasta"),r(),i(90,"input",32),E("ngModelChange",function(p){return g(s),b(l.filters.date_to,p)||(l.filters.date_to=p),x(p)}),r(),v(91,"mat-datepicker-toggle",33)(92,"mat-datepicker",null,1),r(),i(94,"mat-form-field",27)(95,"mat-label"),n(96,"Sector"),r(),i(97,"mat-select",28),E("ngModelChange",function(p){return g(s),b(l.filters.sector_id,p)||(l.filters.sector_id=p),x(p)}),i(98,"mat-option",34),n(99,"Todos los sectores"),r(),c(100,He,2,2,"mat-option",35),r()(),i(101,"mat-form-field",27)(102,"mat-label"),n(103,"Operador"),r(),i(104,"mat-select",28),E("ngModelChange",function(p){return g(s),b(l.filters.operator_id,p)||(l.filters.operator_id=p),x(p)}),i(105,"mat-option",34),n(106,"Todos los operadores"),r(),c(107,Be,2,2,"mat-option",35),r()()(),i(108,"div",36)(109,"button",37),S("click",function(){return g(s),x(l.clearFilters())}),i(110,"mat-icon"),n(111,"refresh"),r(),n(112," Limpiar "),r(),i(113,"button",38),S("click",function(){return g(s),x(l.generateReportFromFilters())}),i(114,"mat-icon"),n(115,"search"),r(),n(116," Generar Reporte "),r()()()(),c(117,Dt,29,17,"mat-card",39),r()}if(m&2){let s=k(86),_=k(93);a(8),I("cursor-pointer",l.selectedReportType==="sales")("opacity-50",l.selectedReportType!=="sales"),a(),d("ngIf",l.selectedReportType!=="sales"),a(13),u(l.getTotalSales()),a(4),I("cursor-pointer",l.selectedReportType==="debts")("opacity-50",l.selectedReportType!=="debts"),a(),d("ngIf",l.selectedReportType!=="debts"),a(13),u(l.getTotalDebtsAmount()),a(4),I("cursor-pointer",l.selectedReportType==="operator")("opacity-50",l.selectedReportType!=="operator"),a(),d("ngIf",l.selectedReportType!=="operator"),a(13),u(l.getOperatorCount()),a(15),y("ngModel",l.selectedReportType),a(10),d("matDatepicker",s),y("ngModel",l.filters.date_from),a(),d("for",s),a(6),d("matDatepicker",_),y("ngModel",l.filters.date_to),a(),d("for",_),a(6),y("ngModel",l.filters.sector_id),a(),d("value",void 0),a(2),d("ngForOf",l.sectors),a(4),y("ngModel",l.filters.operator_id),a(),d("value",void 0),a(2),d("ngForOf",l.operators),a(10),d("ngIf",l.currentReport&&l.currentReportType)}},dependencies:[$,W,H,B,re,ee,te,ie,ue,de,me,_e,ce,se,K,U,J,X,Q,ae,q,Y,z,G,oe,ne,xe,fe,he,ge,pe,le,j,Ie,Re,Ce,Te,ye,Se,De,be,Ee,Me,we,L,Z],styles:[".mat-mdc-card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:box-shadow .3s ease}.mat-mdc-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 25px #00000026}@media (max-width: 768px){.grid-cols-3[_ngcontent-%COMP%], .grid-cols-4[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return e})();export{ri as ReportsComponent};
