import{a as ze}from"./chunk-OBHV2XAP.js";import{a as Ge}from"./chunk-QU4WFXUG.js";import{a as Ye}from"./chunk-ZMZZWBL4.js";import{c as We}from"./chunk-A34BBAVQ.js";import{a as Be,b as Le,c as Ne,d as Re}from"./chunk-HP5IZPY4.js";import{a as ye,b as Ee,c as Te,d as Pe,e as ke,f as De,g as Ie,h as Oe,i as Ve,j as Fe,k as Ae}from"./chunk-EYHG6JIJ.js";import{a as $e,c as je,f as He}from"./chunk-O24YRI2L.js";import{a as we}from"./chunk-LISAJ4W4.js";import{a as Ce,b as Se,c as xe,d as Me}from"./chunk-PFLL6SKJ.js";import{a as be,b as ve}from"./chunk-7XMR7DBQ.js";import"./chunk-2LVKS4R7.js";import{a as fe,b as ge}from"./chunk-EQ3II6XW.js";import{g as ee}from"./chunk-EUXZI2DA.js";import"./chunk-UG2EBNTC.js";import{a as ne,b as oe,c as ae,d as re}from"./chunk-E7BFUDNM.js";import{a as te,b as ie}from"./chunk-G7M3T37K.js";import"./chunk-UF23LYQO.js";import"./chunk-VKB6BRO6.js";import{b as he}from"./chunk-MP4NGWWR.js";import{b as X,c as Z}from"./chunk-U3LSFXAC.js";import{d as de,e as pe}from"./chunk-PKSNJV5O.js";import{a as _e,b as ue}from"./chunk-VKOFSPQJ.js";import{b as R,e as Y,f as G,j as U,k as q}from"./chunk-L3L2HYJX.js";import{b as se,f as le,j as me,x as ce}from"./chunk-EGGCURRC.js";import{W as j,fa as H,la as J,na as K,oa as Q,u as W,v as $}from"./chunk-JXZZYULX.js";import"./chunk-CQGOYTFO.js";import{d as z}from"./chunk-DOMNBE5L.js";import"./chunk-7OGW3PNS.js";import{l as B,m as L,s as N}from"./chunk-TQARHOKX.js";import{$b as h,Eb as p,Fb as w,Gb as D,Ib as F,Pb as n,Qb as i,Rb as y,Sb as C,Tb as S,U as k,Vb as M,bb as s,bc as d,cb as v,f as O,lc as I,mc as a,nc as b,oa as _,oc as x,pa as u,pb as V,rc as E,sc as T,tc as P,uc as A,wb as g}from"./chunk-BSJZAB7M.js";import"./chunk-TSRGIXR5.js";function qe(t,l){if(t&1&&(n(0,"mat-option",42),a(1),i()),t&2){let e=l.$implicit;p("value",e.id),s(),x(" ",e.name," ")}}function Je(t,l){if(t&1&&(n(0,"mat-option",42),a(1),i()),t&2){let e=l.$implicit;p("value",e.id),s(),x(" ",e.name," ")}}function Ke(t,l){if(t&1&&(n(0,"mat-option",42),a(1),i()),t&2){let e=l.$implicit;p("value",e.value),s(),x(" ",e.label," ")}}function Qe(t,l){t&1&&(n(0,"div",43),y(1,"mat-spinner",44),i())}function Xe(t,l){if(t&1&&(n(0,"div",25)(1,"fuse-alert",45),a(2),i()()),t&2){let e=d();s(),p("dismissible",!0),s(),x(" ",e.error," ")}}function Ze(t,l){if(t&1&&(n(0,"th",68),a(1,"Placa"),i()),t&2){let e=d(2);w("width",e.isMobile?18:12,"%")}}function et(t,l){if(t&1&&y(0,"div",73),t&2){let e=d().$implicit,r=d(2);w("background-color",r.getStatusCircleColor(e.status)),p("matTooltip",r.getStatusLabel(e.status))}}function tt(t,l){if(t&1&&(n(0,"td",69)(1,"div",70),g(2,et,1,3,"div",71),n(3,"div",72),a(4),i()()()),t&2){let e=l.$implicit,r=d(2);s(2),p("ngIf",r.isMobile),s(2),b(e.plate)}}function it(t,l){t&1&&(n(0,"th",74),a(1,"Sector"),i())}function nt(t,l){if(t&1&&(n(0,"td",69)(1,"div",75),a(2),i()()),t&2){let e=l.$implicit;s(2),b((e.sector==null?null:e.sector.name)||"N/A")}}function ot(t,l){t&1&&(n(0,"th",74),a(1,"Calle"),i())}function at(t,l){if(t&1&&(n(0,"td",69)(1,"div",75),a(2),i()()),t&2){let e=l.$implicit;s(2),b((e.street==null?null:e.street.name)||"N/A")}}function rt(t,l){t&1&&(n(0,"th",76),a(1,"Operador"),i())}function st(t,l){if(t&1&&(n(0,"td",69)(1,"div",75),a(2),i()()),t&2){let e=l.$implicit;s(2),b((e.operator==null?null:e.operator.name)||"N/A")}}function lt(t,l){if(t&1&&(n(0,"th",68),a(1,"Inicio"),i()),t&2){let e=d(2);w("width",e.isMobile?18:15,"%")}}function mt(t,l){if(t&1&&(n(0,"td",69)(1,"div",75),a(2),i()()),t&2){let e=l.$implicit,r=d(2);s(),D("text-xs",r.isMobile),s(),x(" ",r.isMobile?r.formatDateTimeMobile(e.started_at):r.formatDateTime(e.started_at)," ")}}function ct(t,l){if(t&1&&(n(0,"th",68),a(1,"Fin"),i()),t&2){let e=d(2);w("width",e.isMobile?18:15,"%")}}function dt(t,l){if(t&1&&(n(0,"td",69)(1,"div",75),a(2),i()()),t&2){let e=l.$implicit,r=d(2);s(),D("text-xs",r.isMobile),s(),x(" ",e.ended_at?r.isMobile?r.formatDateTimeMobile(e.ended_at):r.formatDateTime(e.ended_at):"-"," ")}}function pt(t,l){if(t&1&&(n(0,"th",68),a(1,"Duraci\xF3n"),i()),t&2){let e=d(2);w("width",e.isMobile?12:10,"%")}}function _t(t,l){if(t&1&&(n(0,"td",69)(1,"div",75),a(2),i()()),t&2){let e=l.$implicit,r=d(2);s(),D("text-xs",r.isMobile),s(),x(" ",e.duration_formatted||"-"," ")}}function ut(t,l){if(t&1&&(n(0,"th",68),a(1,"Monto"),i()),t&2){let e=d(2);w("width",e.isMobile?12:10,"%")}}function ft(t,l){if(t&1&&(n(0,"td",69)(1,"div",77),a(2),i()()),t&2){let e=l.$implicit,r=d(2);s(),D("text-xs",r.isMobile),s(),x(" ",e.total_paid_formatted||"-"," ")}}function gt(t,l){t&1&&(n(0,"th",78),a(1,"Estado"),i())}function ht(t,l){if(t&1&&(n(0,"td",69)(1,"span",79),a(2),i()()),t&2){let e=l.$implicit,r=d(2);s(),F("bg-"+r.getStatusColor(e.status)+"-100 text-"+r.getStatusColor(e.status)+"-800"),s(),x(" ",r.getStatusLabel(e.status)," ")}}function Ct(t,l){if(t&1&&(n(0,"th",80),a(1,"Acciones"),i()),t&2){let e=d(2);w("width",(e.isMobile,10),"%")}}function St(t,l){if(t&1){let e=M();n(0,"button",83),h("click",function(){_(e);let o=d().$implicit,m=d(2);return u(m.editSession(o))}),n(1,"mat-icon"),a(2,"edit"),i(),a(3," Editar "),i()}}function xt(t,l){if(t&1){let e=M();n(0,"button",83),h("click",function(){_(e);let o=d().$implicit,m=d(2);return u(m.checkoutSession(o))}),n(1,"mat-icon"),a(2,"exit_to_app"),i(),a(3," Checkout "),i()}}function Mt(t,l){if(t&1){let e=M();n(0,"button",83),h("click",function(){_(e);let o=d().$implicit,m=d(2);return u(m.paySession(o))}),n(1,"mat-icon"),a(2,"payment"),i(),a(3," Pagar "),i()}}function bt(t,l){if(t&1){let e=M();n(0,"button",86),h("click",function(){_(e);let o=d().$implicit,m=d(2);return u(m.cancelSession(o))}),n(1,"mat-icon"),a(2,"cancel"),i(),a(3," Cancelar "),i()}}function vt(t,l){if(t&1){let e=M();n(0,"td",81)(1,"button",82)(2,"mat-icon"),a(3,"more_vert"),i()(),n(4,"mat-menu",null,2)(6,"button",83),h("click",function(){let o=_(e).$implicit,m=d(2);return u(m.viewSession(o))}),n(7,"mat-icon"),a(8,"visibility"),i(),a(9," Ver Detalles "),i(),g(10,St,4,0,"button",84)(11,xt,4,0,"button",84)(12,Mt,4,0,"button",84)(13,bt,4,0,"button",85),i()()}if(t&2){let e=l.$implicit,r=I(5),o=d(2);s(),p("matMenuTriggerFor",r),s(9),p("ngIf",o.canEdit(e)),s(),p("ngIf",o.canCheckout(e)),s(),p("ngIf",o.canPay(e)),s(),p("ngIf",o.canCancel(e))}}function wt(t,l){t&1&&y(0,"tr",87)}function yt(t,l){t&1&&y(0,"tr",88)}function Et(t,l){if(t&1&&(n(0,"mat-card")(1,"mat-card-content",46)(2,"div",47)(3,"table",48),C(4,49),g(5,Ze,2,2,"th",50)(6,tt,5,2,"td",51),S(),C(7,52),g(8,it,2,0,"th",53)(9,nt,3,1,"td",51),S(),C(10,54),g(11,ot,2,0,"th",53)(12,at,3,1,"td",51),S(),C(13,55),g(14,rt,2,0,"th",56)(15,st,3,1,"td",51),S(),C(16,57),g(17,lt,2,2,"th",50)(18,mt,3,3,"td",51),S(),C(19,58),g(20,ct,2,2,"th",50)(21,dt,3,3,"td",51),S(),C(22,59),g(23,pt,2,2,"th",50)(24,_t,3,3,"td",51),S(),C(25,60),g(26,ut,2,2,"th",50)(27,ft,3,3,"td",51),S(),C(28,61),g(29,gt,2,0,"th",62)(30,ht,3,3,"td",51),S(),C(31,63),g(32,Ct,2,2,"th",64)(33,vt,14,5,"td",65),S(),g(34,wt,1,0,"tr",66)(35,yt,1,0,"tr",67),i()()()()),t&2){let e=d();s(3),p("dataSource",e.sessions),s(31),p("matHeaderRowDef",e.isMobile?e.displayedColumnsMobile:e.displayedColumns),s(),p("matRowDefColumns",e.isMobile?e.displayedColumnsMobile:e.displayedColumns)}}function Tt(t,l){if(t&1){let e=M();n(0,"mat-paginator",89),h("page",function(o){_(e);let m=d();return u(m.onPageChange(o))}),i()}if(t&2){let e=d();p("length",e.totalItems)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)("pageIndex",e.currentPage)}}function Pt(t,l){if(t&1){let e=M();n(0,"div",90)(1,"mat-icon",91),a(2,"directions_car"),i(),n(3,"h3",92),a(4,"No hay sesiones"),i(),n(5,"p",93),a(6,"No se encontraron sesiones con los filtros aplicados."),i(),n(7,"button",7),h("click",function(){_(e);let o=d();return u(o.createNewSession())}),n(8,"mat-icon"),a(9,"add"),i(),a(10," Crear Nueva Sesi\xF3n "),i()()}}var xi=(()=>{class t{constructor(e,r,o,m,f,c,Ue){this.sessionService=e,this.sectorService=r,this.operatorService=o,this.router=m,this.snackBar=f,this.confirmationService=c,this.breakpointObserver=Ue,this._unsubscribeAll=new O,this.sessions=[],this.loading=!1,this.error=null,this.totalItems=0,this.pageSize=15,this.currentPage=0,this.pageSizeOptions=[5,10,15,25,50],this.filters={plate:"",sector_id:void 0,operator_id:void 0,status:"",date_from:"",date_to:""},this.dateFromModel=null,this.dateToModel=null,this.sectors=[],this.operators=[],this.statusOptions=[{value:"",label:"Todos"},{value:"CREATED",label:"Creada"},{value:"ACTIVE",label:"Activa"},{value:"TO_PAY",label:"Por Pagar"},{value:"PAID",label:"Pagada"},{value:"CLOSED",label:"Cerrada"},{value:"CANCELED",label:"Cancelada"}],this.displayedColumns=["plate","sector","street","operator","started_at","ended_at","duration","amount","status","actions"],this.displayedColumnsMobile=["plate","started_at","ended_at","duration","amount","actions"],this.isMobile=!1}ngOnInit(){this.loadSectors(),this.loadOperators(),this.loadSessions(),this.breakpointObserver.observe([$.Handset]).pipe(k(this._unsubscribeAll)).subscribe(e=>{this.isMobile=e.matches})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadSessions(){this.loading=!0,this.error=null;let e={page:this.currentPage+1,per_page:this.pageSize};this.filters.plate&&this.filters.plate.trim()!==""&&(e.plate=this.filters.plate.trim()),this.filters.sector_id!==void 0&&this.filters.sector_id!==null&&(e.sector_id=this.filters.sector_id),this.filters.operator_id!==void 0&&this.filters.operator_id!==null&&(e.operator_id=this.filters.operator_id),this.filters.status&&this.filters.status.trim()!==""&&(e.status=this.filters.status),this.filters.date_from&&this.filters.date_from.trim()!==""&&(e.date_from=this.filters.date_from),this.filters.date_to&&this.filters.date_to.trim()!==""&&(e.date_to=this.filters.date_to),this.sessionService.getSessions(e).pipe(k(this._unsubscribeAll)).subscribe({next:r=>{this.sessions=r.data||[],this.totalItems=r.pagination?.total||0,this.loading=!1},error:r=>{this.error="Error al cargar sesiones",this.loading=!1,console.error("Error loading sessions:",r),this.snackBar.open("Error al cargar sesiones","Cerrar",{duration:3e3})}})}loadSectors(){this.sectorService.getSectors().pipe(k(this._unsubscribeAll)).subscribe({next:e=>{this.sectors=e.data?.data||[]},error:e=>{console.error("Error loading sectors:",e)}})}loadOperators(){this.operatorService.getOperators().pipe(k(this._unsubscribeAll)).subscribe({next:e=>{this.operators=e.data?.data||[]},error:e=>{console.error("Error loading operators:",e)}})}viewSession(e){this.router.navigate(["/parking/sessions",e.id])}editSession(e){e.status==="ACTIVE"?this.router.navigate(["/parking/sessions",e.id,"edit"]):this.snackBar.open("Solo se pueden editar sesiones activas","Cerrar",{duration:3e3})}cancelSession(e){if(e.status!=="ACTIVE"){this.snackBar.open("Solo se pueden cancelar sesiones activas","Cerrar",{duration:3e3});return}this.confirmationService.open({title:"Cancelar Sesi\xF3n",message:`\xBFEst\xE1 seguro de cancelar la sesi\xF3n de la placa ${e.plate}?`,icon:{show:!0,name:"heroicons_outline:exclamation-triangle",color:"warn"},actions:{confirm:{show:!0,label:"Cancelar Sesi\xF3n",color:"warn"},cancel:{show:!0,label:"No"}}}).afterClosed().subscribe(o=>{o==="confirmed"&&this.sessionService.cancelSession(e.id).pipe(k(this._unsubscribeAll)).subscribe({next:m=>{this.snackBar.open("Sesi\xF3n cancelada exitosamente","Cerrar",{duration:3e3}),this.loadSessions()},error:m=>{this.snackBar.open("Error al cancelar sesi\xF3n","Cerrar",{duration:3e3}),console.error("Error canceling session:",m)}})})}checkoutSession(e){if(e.status!=="ACTIVE"){this.snackBar.open("Solo se puede hacer checkout de sesiones activas","Cerrar",{duration:3e3});return}this.router.navigate(["/parking/sessions",e.id,"checkout"])}paySession(e){if(e.status!=="TO_PAY"){this.snackBar.open("Solo se pueden pagar sesiones pendientes de pago","Cerrar",{duration:3e3});return}this.router.navigate(["/parking/sessions",e.id,"payment"])}formatAmount(e){return this.sessionService.formatAmount(e)}formatDate(e){return new Date(e).toLocaleString("es-CL")}formatDateTime(e){if(!e)return"N/A";let r=new Date(e);if(isNaN(r.getTime()))return"N/A";let o=r.toLocaleDateString("es-CL",{day:"2-digit",month:"2-digit",year:"2-digit"}),m=r.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${o} ${m}`}formatDateTimeMobile(e){if(!e)return"-";let r=new Date(e);if(isNaN(r.getTime()))return"-";let o=String(r.getDate()).padStart(2,"0"),m=String(r.getMonth()+1).padStart(2,"0"),f=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0");return`${o}/${m} ${f}:${c}`}formatDuration(e){return this.sessionService.formatDuration(e)}getStatusLabel(e){return this.sessionService.getStatusLabel(e)}getStatusColor(e){return this.sessionService.getStatusColor(e)}getStatusCircleColor(e){return{CREATED:"#6B7280",ACTIVE:"#3B82F6",TO_PAY:"#F59E0B",PAID:"#10B981",CLOSED:"#10B981",CANCELED:"#EF4444"}[e]||"#6B7280"}getActiveSessionsCount(){return this.sessions.filter(e=>e.status==="ACTIVE").length}getToPaySessionsCount(){return this.sessions.filter(e=>e.status==="TO_PAY").length}getPaidSessionsCount(){return this.sessions.filter(e=>e.status==="PAID").length}canEdit(e){return e.status==="ACTIVE"}canCancel(e){return e.status==="ACTIVE"}canCheckout(e){return e.status==="ACTIVE"}canPay(e){return e.status==="TO_PAY"}createNewSession(){this.router.navigate(["/parking/sessions/new"])}exportSessions(){this.snackBar.open("Funcionalidad de exportaci\xF3n en desarrollo","Cerrar",{duration:3e3})}refreshSessions(){this.loadSessions()}onSearchChange(e){this.filters.plate=e||""}onSectorChange(e){e===""||e===null?this.filters.sector_id=void 0:this.filters.sector_id=typeof e=="number"?e:parseInt(e,10),this.applyFilters()}onOperatorChange(e){e===""||e===null?this.filters.operator_id=void 0:this.filters.operator_id=typeof e=="number"?e:parseInt(e,10),this.applyFilters()}onStatusChange(e){this.filters.status=e||"",this.applyFilters()}formatDateLocal(e){let r=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${r}-${o}-${m}`}onDateFromChange(e){e?this.filters.date_from=this.formatDateLocal(e):this.filters.date_from="",this.applyFilters()}onDateToChange(e){e?this.filters.date_to=this.formatDateLocal(e):this.filters.date_to="",this.applyFilters()}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadSessions()}applyFilters(){this.currentPage=0,this.loadSessions()}clearFilters(){this.filters={plate:"",sector_id:void 0,operator_id:void 0,status:"",date_from:"",date_to:""},this.dateFromModel=null,this.dateToModel=null,this.currentPage=0,this.loadSessions()}static{this.\u0275fac=function(r){return new(r||t)(v(we),v(Ye),v(Ge),v(z),v(fe),v(ee),v(W))}}static{this.\u0275cmp=V({type:t,selectors:[["app-sessions"]],features:[A([{provide:Be,useValue:Re()}])],decls:112,vars:22,consts:[["pickerFrom",""],["pickerTo",""],["actionMenu","matMenu"],[1,"p-6","w-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],["mat-raised-button","","color","primary",1,"rounded-sm",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6","mb-6"],[1,"p-6"],[1,"flex","items-center"],[1,"p-3","bg-blue-100","rounded-full"],[1,"text-blue-600"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"p-3","bg-green-100","rounded-full"],[1,"text-green-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"p-3","bg-orange-100","rounded-full"],[1,"text-orange-600"],[1,"text-2xl","font-bold","text-orange-600"],[1,"p-3","bg-purple-100","rounded-full"],[1,"text-purple-600"],[1,"text-2xl","font-bold","text-purple-600"],[1,"mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["appearance","outline"],["matInput","","placeholder","ABC123",3,"ngModelChange","ngModel"],["matPrefix",""],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","DD/MM/YYYY",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[1,"flex","justify-end","gap-2","mt-4"],["mat-stroked-button","",1,"rounded-sm",3,"click"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","mb-6",4,"ngIf"],[4,"ngIf"],["showFirstLastButtons","","class","mt-4",3,"length","pageSize","pageSizeOptions","pageIndex","page",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[3,"value"],[1,"flex","justify-center","items-center","h-64"],["diameter","50"],["type","error",3,"dismissible"],[1,"p-0"],[1,"overflow-x-auto"],["mat-table","",1,"w-full","mat-elevation-z2",2,"width","100%","table-layout","fixed",3,"dataSource"],["matColumnDef","plate"],["mat-header-cell","",3,"width",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sector"],["mat-header-cell","","style","width: 12%;",4,"matHeaderCellDef"],["matColumnDef","street"],["matColumnDef","operator"],["mat-header-cell","","style","width: 15%;",4,"matHeaderCellDef"],["matColumnDef","started_at"],["matColumnDef","ended_at"],["matColumnDef","duration"],["matColumnDef","amount"],["matColumnDef","status"],["mat-header-cell","","style","width: 10%;",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","text-right",3,"width",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"flex","items-center","gap-2"],["class","status-circle flex-shrink-0",3,"background-color","matTooltip",4,"ngIf"],[1,"font-medium","text-gray-900"],[1,"status-circle","flex-shrink-0",3,"matTooltip"],["mat-header-cell","",2,"width","12%"],[1,"text-sm","text-gray-600"],["mat-header-cell","",2,"width","15%"],[1,"text-sm","font-medium","text-gray-900"],["mat-header-cell","",2,"width","10%"],[1,"px-2","py-1","rounded","text-xs","font-medium"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-icon-button","",1,"rounded-sm",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","","class","text-red-600",3,"click",4,"ngIf"],["mat-menu-item","",1,"text-red-600",3,"click"],["mat-header-row",""],["mat-row",""],["showFirstLastButtons","",1,"mt-4",3,"page","length","pageSize","pageSizeOptions","pageIndex"],[1,"text-center","py-12"],[1,"text-6xl","text-gray-400","mb-4"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"]],template:function(r,o){if(r&1){let m=M();n(0,"div",3)(1,"div",4)(2,"div")(3,"h1",5),a(4,"Sesiones"),i(),n(5,"p",6),a(6,"Gestiona las sesiones de estacionamiento del sistema"),i()(),n(7,"button",7),h("click",function(){return _(m),u(o.createNewSession())}),n(8,"mat-icon"),a(9,"add"),i(),a(10," Nueva Sesi\xF3n "),i()(),n(11,"div",8)(12,"mat-card")(13,"mat-card-content",9)(14,"div",10)(15,"div",11)(16,"mat-icon",12),a(17,"directions_car"),i()(),n(18,"div",13)(19,"p",14),a(20,"Total Sesiones"),i(),n(21,"p",15),a(22),i()()()()(),n(23,"mat-card")(24,"mat-card-content",9)(25,"div",10)(26,"div",16)(27,"mat-icon",17),a(28,"play_circle"),i()(),n(29,"div",13)(30,"p",14),a(31,"Activas"),i(),n(32,"p",18),a(33),i()()()()(),n(34,"mat-card")(35,"mat-card-content",9)(36,"div",10)(37,"div",19)(38,"mat-icon",20),a(39,"schedule"),i()(),n(40,"div",13)(41,"p",14),a(42,"Por Pagar"),i(),n(43,"p",21),a(44),i()()()()(),n(45,"mat-card")(46,"mat-card-content",9)(47,"div",10)(48,"div",22)(49,"mat-icon",23),a(50,"check_circle"),i()(),n(51,"div",13)(52,"p",14),a(53,"Pagadas"),i(),n(54,"p",24),a(55),i()()()()()(),n(56,"mat-card",25)(57,"mat-card-content",9)(58,"div",26)(59,"mat-form-field",27)(60,"mat-label"),a(61,"Buscar por Placa"),i(),n(62,"input",28),P("ngModelChange",function(c){return _(m),T(o.filters.plate,c)||(o.filters.plate=c),u(c)}),i(),n(63,"mat-icon",29),a(64,"search"),i()(),n(65,"mat-form-field",27)(66,"mat-label"),a(67,"Sector"),i(),n(68,"mat-select",30),P("ngModelChange",function(c){return _(m),T(o.filters.sector_id,c)||(o.filters.sector_id=c),u(c)}),h("selectionChange",function(c){return _(m),u(o.onSectorChange(c.value))}),n(69,"mat-option",31),a(70,"Todos los sectores"),i(),g(71,qe,2,2,"mat-option",32),i()(),n(72,"mat-form-field",27)(73,"mat-label"),a(74,"Operador"),i(),n(75,"mat-select",30),P("ngModelChange",function(c){return _(m),T(o.filters.operator_id,c)||(o.filters.operator_id=c),u(c)}),h("selectionChange",function(c){return _(m),u(o.onOperatorChange(c.value))}),n(76,"mat-option",31),a(77,"Todos los operadores"),i(),g(78,Je,2,2,"mat-option",32),i()(),n(79,"mat-form-field",27)(80,"mat-label"),a(81,"Estado"),i(),n(82,"mat-select",30),P("ngModelChange",function(c){return _(m),T(o.filters.status,c)||(o.filters.status=c),u(c)}),h("selectionChange",function(c){return _(m),u(o.onStatusChange(c.value))}),g(83,Ke,2,2,"mat-option",32),i()(),n(84,"mat-form-field",27)(85,"mat-label"),a(86,"Fecha Desde"),i(),n(87,"input",33),P("ngModelChange",function(c){return _(m),T(o.dateFromModel,c)||(o.dateFromModel=c),u(c)}),h("dateChange",function(c){return _(m),u(o.onDateFromChange(c.value))}),i(),y(88,"mat-datepicker-toggle",34)(89,"mat-datepicker",null,0),i(),n(91,"mat-form-field",27)(92,"mat-label"),a(93,"Fecha Hasta"),i(),n(94,"input",33),P("ngModelChange",function(c){return _(m),T(o.dateToModel,c)||(o.dateToModel=c),u(c)}),h("dateChange",function(c){return _(m),u(o.onDateToChange(c.value))}),i(),y(95,"mat-datepicker-toggle",34)(96,"mat-datepicker",null,1),i()(),n(98,"div",35)(99,"button",36),h("click",function(){return _(m),u(o.clearFilters())}),n(100,"mat-icon"),a(101,"clear"),i(),a(102," Limpiar "),i(),n(103,"button",7),h("click",function(){return _(m),u(o.applyFilters())}),n(104,"mat-icon"),a(105,"search"),i(),a(106," Filtrar "),i()()()(),g(107,Qe,2,0,"div",37)(108,Xe,3,2,"div",38)(109,Et,36,3,"mat-card",39)(110,Tt,1,4,"mat-paginator",40)(111,Pt,11,0,"div",41),i()}if(r&2){let m=I(90),f=I(97);s(22),b(o.sessions.length),s(11),b(o.getActiveSessionsCount()),s(11),b(o.getToPaySessionsCount()),s(11),b(o.getPaidSessionsCount()),s(7),E("ngModel",o.filters.plate),s(6),E("ngModel",o.filters.sector_id),s(3),p("ngForOf",o.sectors),s(4),E("ngModel",o.filters.operator_id),s(3),p("ngForOf",o.operators),s(4),E("ngModel",o.filters.status),s(),p("ngForOf",o.statusOptions),s(4),p("matDatepicker",m),E("ngModel",o.dateFromModel),s(),p("for",m),s(6),p("matDatepicker",f),E("ngModel",o.dateToModel),s(),p("for",f),s(12),p("ngIf",o.loading),s(),p("ngIf",o.error),s(),p("ngIf",!o.loading),s(),p("ngIf",!o.loading&&o.sessions.length>0),s(),p("ngIf",!o.loading&&o.sessions.length===0)}},dependencies:[N,B,L,ce,se,le,me,Ae,ye,Te,Ie,Pe,Ee,Oe,ke,De,Ve,Fe,Ne,Le,ze,Q,J,K,Z,X,q,U,R,Y,G,pe,de,ve,be,H,Me,Ce,Se,xe,j,We,ie,te,re,oe,ne,ae,ge,ue,_e,he,He,$e,je],styles:[".mat-chip[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.mat-chip.mat-chip-green[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.mat-chip.mat-chip-blue[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.mat-chip.mat-chip-orange[_ngcontent-%COMP%]{background-color:#f59e0b;color:#fff}.mat-chip.mat-chip-red[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.mat-chip.mat-chip-gray[_ngcontent-%COMP%]{background-color:#6b7280;color:#fff}.table-container[_ngcontent-%COMP%]{overflow-x:auto}@media (max-width: 768px){.mat-table[_ngcontent-%COMP%]{font-size:14px}.mat-header-cell[_ngcontent-%COMP%]{font-size:11px!important;font-weight:500}.mat-column-actions[_ngcontent-%COMP%]{width:60px}.mat-column-street[_ngcontent-%COMP%], .mat-column-operator[_ngcontent-%COMP%], .mat-column-sector[_ngcontent-%COMP%]{display:none}.status-circle[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:2px;display:inline-block;cursor:pointer;transition:transform .2s}.status-circle[_ngcontent-%COMP%]:hover{transform:scale(1.2)}}.filters-section[_ngcontent-%COMP%]{background:#f8fafc;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem}.action-button[_ngcontent-%COMP%]{margin-right:8px}.action-button[_ngcontent-%COMP%]:last-child{margin-right:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;height:4rem;width:4rem;color:#9ca3af;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#111827;font-size:1.125rem;font-weight:500;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:16rem}.error-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}"]})}}return t})();export{xi as SessionsComponent};
