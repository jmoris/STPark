import{a as H}from"./chunk-AXYEW2PK.js";import{a as j}from"./chunk-Y33ASIMI.js";import{a as B,c as Y}from"./chunk-ZMAIZYCZ.js";import{f as Q}from"./chunk-CFZHHQ3I.js";import{a as V,b as N}from"./chunk-FGUURFJS.js";import"./chunk-3FSLCT73.js";import{c as A}from"./chunk-ZMKJJYLL.js";import"./chunk-EOYQYJ3N.js";import"./chunk-VKB6BRO6.js";import{b as F,c as R}from"./chunk-72F6PA3H.js";import"./chunk-F2IYN6IZ.js";import"./chunk-EO526QJS.js";import{a as q,b as z}from"./chunk-6JXRNXI3.js";import"./chunk-XMMUWBM2.js";import{la as w,na as k,oa as L}from"./chunk-56JILNRZ.js";import"./chunk-TTG7A5I5.js";import{b as D,d as T}from"./chunk-P2DCSIJY.js";import"./chunk-FDUGCV2L.js";import{l as M,m as I,t as O}from"./chunk-IZAOXH6X.js";import{$b as v,Eb as r,Ib as h,Pb as i,Qb as n,Rb as P,U as y,Vb as S,bb as a,bc as c,cb as f,f as E,mc as o,nc as d,oa as x,oc as p,pa as C,pb as b,wb as u}from"./chunk-QDWFRTQW.js";import"./chunk-TSRGIXR5.js";function K(e,l){if(e&1&&(i(0,"div",8)(1,"span",9),o(2),n(),i(3,"span",10),o(4),n(),i(5,"span",11),o(6),n()()),e&2){let t=c();a(2),p("#",t.session.id,""),a(2),d(t.session.plate),a(),h("bg-"+t.getStatusColor(t.session.status)+"-100 text-"+t.getStatusColor(t.session.status)+"-800"),a(),p(" ",t.getStatusLabel(t.session.status)," ")}}function W(e,l){e&1&&(i(0,"div",12),P(1,"mat-spinner"),i(2,"p"),o(3,"Cargando detalles de la sesi\xF3n..."),n()())}function $(e,l){if(e&1){let t=S();i(0,"div",13)(1,"mat-icon",14),o(2,"error"),n(),i(3,"p"),o(4),n(),i(5,"button",15),v("click",function(){x(t);let m=c();return C(m.loadSession())}),o(6," Reintentar "),n()()}if(e&2){let t=c();a(4),d(t.error)}}function G(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2,"Operador que cerr\xF3"),n(),i(3,"span",22),o(4),n()()),e&2){let t=c(2);a(4),d((t.session.operator_out==null?null:t.session.operator_out.name)||"N/A")}}function J(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2,"Tipo de Ingreso"),n(),i(3,"span",22)(4,"mat-chip"),o(5),n()()()),e&2){let t=c(2);a(4),h(t.session.is_full_day?"chip-full-day":"chip-time"),a(),p(" ",t.session.is_full_day?"D\xEDa Completo":"Por Tiempo"," ")}}function X(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2,"Salida"),n(),i(3,"span",22),o(4),n()()),e&2){let t=c(2);a(4),d(t.formatDate(t.session.ended_at))}}function Z(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2,"Duraci\xF3n"),n(),i(3,"span",22),o(4),n()()),e&2){let t=c(2);a(4),d(t.session.duration_formatted)}}function tt(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2,"Duraci\xF3n"),n(),i(3,"span",22),o(4),n()()),e&2){let t=c(2);a(4),d(t.formatDuration(t.session.seconds_total))}}function et(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2,"Duraci\xF3n Actual"),n(),i(3,"span",35),o(4),n()()),e&2){let t=c(2);a(4),d(t.getCurrentDurationFormatted())}}function nt(e,l){if(e&1&&(i(0,"div",36)(1,"span",21),o(2,"Validez del Ticket"),n(),i(3,"span",37)(4,"mat-icon"),o(5,"event"),n(),o(6," V\xE1lido solo por el d\xEDa de hoy "),n(),i(7,"div",38)(8,"p",39),o(9," Este ticket es v\xE1lido hasta las "),i(10,"strong"),o(11),n(),o(12," del d\xEDa de hoy. El veh\xEDculo permanece ocupando el espacio hasta realizar el checkout. "),n()()()),e&2){let t=c(2);a(11),d(t.getEndOfDayTime())}}function it(e,l){e&1&&(i(0,"div",36)(1,"span",21),o(2,"Tipo de Sesi\xF3n"),n(),i(3,"span",22),o(4," Sesi\xF3n por d\xEDa completo - Tarifa m\xE1xima aplicada "),n()())}function ot(e,l){e&1&&(i(0,"span",42),o(1," \u2713 Pagado "),n())}function at(e,l){if(e&1&&(i(0,"div",20)(1,"span",21),o(2),n(),i(3,"span",22),o(4),n(),u(5,ot,2,0,"span",41),n()),e&2){let t=l.$implicit,s=c(3);a(2),d(s.formatPaymentMethod(t.method)),a(2),d(s.formatAmount(t.amount)),a(),r("ngIf",t.status==="COMPLETED")}}function st(e,l){if(e&1&&(i(0,"span",44),o(1),n()),e&2){let t=c(4);a(),p(" (Falta: ",t.formatAmount(t.session.net_amount-t.session.total_paid),") ")}}function rt(e,l){if(e&1&&(i(0,"div",20)(1,"span",21)(2,"strong"),o(3,"Total Pagado"),n()(),i(4,"span",22)(5,"strong"),o(6),n()(),u(7,st,2,1,"span",43),n()),e&2){let t=c(3);a(6),d(t.session.total_paid_formatted),a(),r("ngIf",t.session.net_amount&&t.session.total_paid&&t.session.total_paid<t.session.net_amount)}}function lt(e,l){if(e&1&&(i(0,"div",18)(1,"h3"),o(2,"Pagos"),n(),i(3,"div",19),u(4,at,6,3,"div",40)(5,rt,8,2,"div",23),n()()),e&2){let t=c(2);a(4),r("ngForOf",t.session.payments),a(),r("ngIf",t.session.total_paid_formatted)}}function ct(e,l){if(e&1&&(i(0,"div",51)(1,"span",52),o(2,"Subtotal (sin descuento)"),n(),i(3,"span",53),o(4),n()()),e&2){let t=c(3);a(4),d(t.formatAmount(t.session.gross_amount||(t.quote==null?null:t.quote.gross_amount)||0))}}function dt(e,l){if(e&1&&(i(0,"p",62),o(1),n()),e&2){let t=c(5);a(),d(t.session.discount.description)}}function mt(e,l){if(e&1&&(i(0,"div",59)(1,"p",60),o(2),n(),u(3,dt,2,1,"p",61),n()),e&2){let t=c(4);a(2),d(t.session.discount.name),a(),r("ngIf",t.session.discount.description)}}function ut(e,l){if(e&1&&(i(0,"div",54)(1,"div",55)(2,"span",52)(3,"mat-icon",56),o(4,"local_offer"),n(),o(5," Descuento Aplicado "),n(),i(6,"span",57),o(7),n()(),u(8,mt,4,2,"div",58),n()),e&2){let t=c(3);a(7),p("-",t.formatAmount(t.session.discount_amount),""),a(),r("ngIf",t.session.discount)}}function pt(e,l){if(e&1&&(i(0,"div",68)(1,"div",69)(2,"span",70),o(3,"Falta por pagar:"),n(),i(4,"span",71),o(5),n()()()),e&2){let t=c(4);a(5),d(t.formatAmount(t.session.net_amount-t.session.total_paid))}}function _t(e,l){if(e&1&&(i(0,"span",75),o(1),n()),e&2){let t=c(5);a(),p(" Vuelto: ",t.formatAmount(t.session.total_paid-t.session.net_amount)," ")}}function ft(e,l){if(e&1&&(i(0,"div",72)(1,"div",69)(2,"span",73),o(3,"Pagado completamente"),n(),u(4,_t,2,1,"span",74),n()()),e&2){let t=c(4);a(4),r("ngIf",t.session.total_paid>t.session.net_amount)}}function gt(e,l){if(e&1&&(i(0,"div",63)(1,"div",64)(2,"div",65)(3,"span",52)(4,"strong"),o(5,"Total a Pagar"),n()(),i(6,"span",53)(7,"strong"),o(8),n()()(),u(9,pt,6,1,"div",66)(10,ft,5,1,"div",67),n()()),e&2){let t=c(3);a(8),d(t.formatAmount(t.session.net_amount||(t.quote==null?null:t.quote.net_amount)||0)),a(),r("ngIf",t.session.net_amount&&t.session.total_paid&&t.session.total_paid<t.session.net_amount),a(),r("ngIf",t.session.net_amount&&t.session.total_paid&&t.session.total_paid>=t.session.net_amount)}}function vt(e,l){e&1&&(i(0,"span"),o(1,"Calculando..."),n())}function xt(e,l){if(e&1&&(i(0,"span"),o(1),n()),e&2){let t=c(4);a(),d(t.getEstimatedCostFormatted())}}function Ct(e,l){if(e&1&&(i(0,"div",79)(1,"small",80),o(2),n()()),e&2){let t=c(4);a(2),p(" Incluye descuento: -",t.formatAmount(t.quote.discount_amount)," ")}}function ht(e,l){if(e&1&&(i(0,"div",76)(1,"span",52),o(2),n(),i(3,"span",53),u(4,vt,2,0,"span",77)(5,xt,2,1,"span",77),n(),u(6,Ct,3,1,"div",78),n()),e&2){let t=c(3);a(2),p(" ",t.session.is_full_day?"Tarifa M\xE1xima Diaria":"Costo Estimado"," "),a(2),r("ngIf",t.loadingQuote),a(),r("ngIf",!t.loadingQuote),a(),r("ngIf",(t.quote==null?null:t.quote.discount_amount)&&t.quote.discount_amount>0&&!t.loadingQuote)}}function St(e,l){if(e&1&&(i(0,"div",45)(1,"h3"),o(2,"Resumen Financiero"),n(),i(3,"div",46),u(4,ct,5,1,"div",47)(5,ut,9,2,"div",48)(6,gt,11,3,"div",49)(7,ht,7,4,"div",50),n()()),e&2){let t=c(2);a(4),r("ngIf",(t.session.gross_amount||t.isActiveSession&&(t.quote==null?null:t.quote.gross_amount))&&(t.session.discount_amount||(t.quote==null?null:t.quote.discount_amount))),a(),r("ngIf",t.session.discount_amount&&t.session.discount_amount>0),a(),r("ngIf",t.session.net_amount||t.isActiveSession&&(t.quote==null?null:t.quote.net_amount)),a(),r("ngIf",t.isActiveSession)}}function yt(e,l){if(e&1){let t=S();i(0,"button",15),v("click",function(){x(t);let m=c(3);return C(m.paySession())}),i(1,"mat-icon"),o(2,"payment"),n(),o(3," Pagar "),n()}}function Et(e,l){if(e&1){let t=S();i(0,"button",84),v("click",function(){x(t);let m=c(3);return C(m.checkoutSession())}),i(1,"mat-icon"),o(2,"payment"),n(),o(3," Procesar Checkout "),n()}}function bt(e,l){if(e&1&&(i(0,"div",81),u(1,yt,4,0,"button",82)(2,Et,4,0,"button",83),n()),e&2){let t=c(2);a(),r("ngIf",t.session.status==="TO_PAY"),a(),r("ngIf",t.session.status==="ACTIVE")}}function Pt(e,l){if(e&1&&(i(0,"div",16)(1,"div",17)(2,"div",18)(3,"h3"),o(4,"Informaci\xF3n de la Sesi\xF3n"),n(),i(5,"div",19)(6,"div",20)(7,"span",21),o(8,"Patente"),n(),i(9,"span",22),o(10),n()(),i(11,"div",20)(12,"span",21),o(13,"Sector"),n(),i(14,"span",22),o(15),n()(),i(16,"div",20)(17,"span",21),o(18,"Calle"),n(),i(19,"span",22),o(20),n()(),i(21,"div",20)(22,"span",21),o(23,"Operador que recibi\xF3"),n(),i(24,"span",22),o(25),n()(),u(26,G,5,1,"div",23)(27,J,6,3,"div",23),n()(),i(28,"div",18)(29,"h3"),o(30,"Tiempo"),n(),i(31,"div",19)(32,"div",20)(33,"span",21),o(34,"Entrada"),n(),i(35,"span",22),o(36),n()(),u(37,X,5,1,"div",23)(38,Z,5,1,"div",23)(39,tt,5,1,"div",23)(40,et,5,1,"div",23)(41,nt,13,1,"div",24)(42,it,5,0,"div",24),n()(),u(43,lt,6,2,"div",25),n(),u(44,St,8,4,"div",26),i(45,"div",27)(46,"div",28)(47,"div",29)(48,"mat-icon",30),o(49),n(),i(50,"div",31)(51,"div",32),o(52),n(),i(53,"div",33),o(54),n()()(),u(55,bt,3,2,"div",34),n()()()),e&2){let t=c();a(10),d(t.session.plate),a(5),d((t.session.sector==null?null:t.session.sector.name)||"N/A"),a(5),d((t.session.street==null?null:t.session.street.name)||"N/A"),a(5),d((t.session.operator==null?null:t.session.operator.name)||"N/A"),a(),r("ngIf",t.session.operator_out_id||t.session.operator_out),a(),r("ngIf",t.session.is_full_day!==void 0),a(9),d(t.formatDate(t.session.started_at)),a(),r("ngIf",t.session.ended_at),a(),r("ngIf",t.session.duration_formatted&&!t.isActiveSession),a(),r("ngIf",t.session.seconds_total&&!t.isActiveSession&&!t.session.duration_formatted),a(),r("ngIf",t.isActiveSession&&!t.session.is_full_day),a(),r("ngIf",t.session.is_full_day&&t.isActiveSession),a(),r("ngIf",t.session.is_full_day&&!t.isActiveSession&&t.session.ended_at),a(),r("ngIf",t.session.payments&&t.session.payments.length>0),a(),r("ngIf",t.session.gross_amount||t.session.net_amount||t.isActiveSession),a(2),h("status-"+t.session.status),a(3),d(t.getPaymentIcon(t.session.status)),a(3),d(t.getPaymentStatusTitle(t.session.status)),a(2),d(t.getPaymentStatusDescription(t.session.status)),a(),r("ngIf",t.session.status==="TO_PAY"||t.session.status==="ACTIVE")}}var Ht=(()=>{class e{constructor(t,s,m,_,g){this.route=t,this.router=s,this.sessionService=m,this.snackBar=_,this.dialog=g,this._unsubscribeAll=new E,this.session=null,this.loading=!1,this.error=null,this.currentDuration=0,this.estimatedCost=0,this.isActiveSession=!1,this.quote=null,this.loadingQuote=!1,this._lastQuoteUpdate=null}ngOnInit(){this.loadSession()}ngOnDestroy(){this.stopRealTimeCalculation(),this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadSession(){this.loading=!0,this.error=null;let t=this.route.snapshot.paramMap.get("id");if(!t){this.error="ID de sesi\xF3n no v\xE1lido",this.loading=!1;return}this.sessionService.getSession(parseInt(t)).pipe(y(this._unsubscribeAll)).subscribe({next:s=>{this.session=s.data,this.loading=!1,this.session?.status==="ACTIVE"?(this.isActiveSession=!0,this.startRealTimeCalculation(),this.loadQuote()):(this.isActiveSession=!1,this.stopRealTimeCalculation())},error:s=>{this.error="Error al cargar la sesi\xF3n",this.loading=!1,console.error("Error loading session:",s),this.snackBar.open("Error al cargar la sesi\xF3n","Cerrar",{duration:3e3})}})}goBack(){this.router.navigate(["/parking/sessions"])}checkoutSession(){if(!this.session||this.session.status!=="ACTIVE"){this.snackBar.open("Solo se puede hacer checkout de sesiones activas","Cerrar",{duration:3e3});return}this.dialog.open(H,{width:"800px",maxWidth:"95vw",maxHeight:"90vh",data:{session:this.session},disableClose:!1}).afterClosed().subscribe(s=>{s?.success&&(this.loadSession(),this.snackBar.open("Checkout procesado exitosamente","Cerrar",{duration:3e3}))})}paySession(){if(!this.session||this.session.status!=="TO_PAY"){this.snackBar.open("Solo se pueden pagar sesiones pendientes de pago","Cerrar",{duration:3e3});return}this.router.navigate(["/parking/sessions",this.session.id,"payment"])}formatAmount(t){return this.sessionService.formatAmount(t)}formatDate(t){if(!t)return"N/A";let s=new Date(t);if(isNaN(s.getTime()))return"N/A";let m=s.toLocaleDateString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric"}),_=s.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit",hour12:!1});return`${m} ${_}`}formatDuration(t){return this.sessionService.formatDuration(t)}getStatusLabel(t){return this.sessionService.getStatusLabel(t)}getStatusColor(t){return this.sessionService.getStatusColor(t)}getPaymentIcon(t){return{PAID:"check_circle",TO_PAY:"schedule",ACTIVE:"play_circle",CANCELLED:"cancel",CANCELED:"cancel",COMPLETED:"check_circle",CLOSED:"check_circle",FORCED_CHECKOUT:"warning",CREATED:"add_circle"}[t]||"help"}getPaymentStatusTitle(t){return{PAID:"Sesi\xF3n Pagada",TO_PAY:"Pendiente de Pago",ACTIVE:"Sesi\xF3n Activa",CANCELLED:"Sesi\xF3n Cancelada",CANCELED:"Sesi\xF3n Cancelada",COMPLETED:"Sesi\xF3n Completada",CLOSED:"Sesi\xF3n Cerrada",FORCED_CHECKOUT:"Checkout Forzado",CREATED:"Sesi\xF3n Creada"}[t]||"Estado Desconocido"}getPaymentStatusDescription(t){return{PAID:"La sesi\xF3n ha sido pagada exitosamente",TO_PAY:"La sesi\xF3n est\xE1 lista para ser pagada",ACTIVE:"La sesi\xF3n est\xE1 actualmente en curso",CANCELLED:"Esta sesi\xF3n ha sido cancelada",CANCELED:"Esta sesi\xF3n ha sido cancelada",COMPLETED:"La sesi\xF3n ha sido completada y cerrada",CLOSED:"La sesi\xF3n ha sido cerrada",FORCED_CHECKOUT:"La sesi\xF3n fue cerrada sin pago (deuda creada)",CREATED:"Sesi\xF3n reci\xE9n creada"}[t]||"Estado no disponible"}formatPaymentMethod(t){return{CASH:"Efectivo",CARD:"Tarjeta",WEBPAY:"Webpay",TRANSFER:"Transferencia"}[t]||t}startRealTimeCalculation(){this.stopRealTimeCalculation(),this.calculateCurrentDuration(),this._intervalId=setInterval(()=>{this.calculateCurrentDuration()},1e3),this.session&&!this.session.is_full_day&&this.startQuoteRefresh()}startQuoteRefresh(){this.stopQuoteRefresh(),this._quoteIntervalId=setInterval(()=>{this.session&&!this.session.is_full_day&&this.isActiveSession&&this.loadQuote()},3e4)}stopQuoteRefresh(){this._quoteIntervalId&&(clearInterval(this._quoteIntervalId),this._quoteIntervalId=null)}stopRealTimeCalculation(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this.stopQuoteRefresh()}loadQuote(){if(!this.session||this.session.status!=="ACTIVE")return;this.loadingQuote=!0;let t=new Date().toISOString();this.sessionService.getQuote(this.session.id,{ended_at:t}).pipe(y(this._unsubscribeAll)).subscribe({next:s=>{this.quote=s.data,this.loadingQuote=!1,this.quote&&(this.estimatedCost=this.quote.net_amount||this.quote.gross_amount||0)},error:s=>{if(console.error("Error loading quote:",s),this.loadingQuote=!1,this.session){let m=new Date(this.session.started_at),g=Math.floor((new Date().getTime()-m.getTime())/1e3);this.estimatedCost=this.calculateEstimatedCostFallback(g)}}})}calculateCurrentDuration(){if(!this.session||this.session.status!=="ACTIVE")return;let t=new Date(this.session.started_at),m=Math.floor((new Date().getTime()-t.getTime())/1e3);this.currentDuration=m}calculateEstimatedCostFallback(t){let m=Math.floor(t/3600),_=Math.floor(t%3600/60),g=1e3/4,U=Math.ceil(_/15);return m*1e3+U*g}getCurrentDurationFormatted(){return this.formatDuration(this.currentDuration)}getEstimatedCostFormatted(){return this.formatAmount(this.estimatedCost)}getEndOfDayTime(){let t=new Date,s=new Date(t);return s.setHours(23,59,59,999),s.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit",hour12:!1})}isFullDaySession(){return this.session?.is_full_day===!0}static{this.\u0275fac=function(s){return new(s||e)(f(D),f(T),f(j),f(V),f(A))}}static{this.\u0275cmp=b({type:e,selectors:[["app-session-detail"]],decls:12,vars:4,consts:[[1,"session-detail-container"],[1,"header"],["mat-icon-button","",1,"back-button",3,"click"],[1,"header-content"],["class","session-meta",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","session-details",4,"ngIf"],[1,"session-meta"],[1,"session-id"],[1,"plate"],[1,"px-2","py-1","rounded","text-xs","font-medium"],[1,"loading-container"],[1,"error-container"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"session-details"],[1,"main-info"],[1,"info-section"],[1,"info-list"],[1,"info-entry"],[1,"info-label"],[1,"info-value"],["class","info-entry",4,"ngIf"],["class","info-entry full-day-info",4,"ngIf"],["class","info-section",4,"ngIf"],["class","financial-summary",4,"ngIf"],[1,"status-section"],[1,"status-card"],[1,"status-content"],[1,"status-icon"],[1,"status-text"],[1,"status-title"],[1,"status-description"],["class","status-actions",4,"ngIf"],[1,"info-value","real-time"],[1,"info-entry","full-day-info"],[1,"info-value","full-day-badge"],[1,"full-day-details"],[1,"full-day-text"],["class","info-entry",4,"ngFor","ngForOf"],["class","info-value","style","color: green; margin-left: 8px;",4,"ngIf"],[1,"info-value",2,"color","green","margin-left","8px"],["class","info-value","style","color: orange; margin-left: 8px; font-size: 0.75rem;",4,"ngIf"],[1,"info-value",2,"color","orange","margin-left","8px","font-size","0.75rem"],[1,"financial-summary"],[1,"amounts"],["class","amount-item",4,"ngIf"],["class","amount-item discount-info",4,"ngIf"],["class","amount-item total",4,"ngIf"],["class","amount-item estimated",4,"ngIf"],[1,"amount-item"],[1,"amount-label"],[1,"amount-value"],[1,"amount-item","discount-info"],[1,"discount-header"],[1,"discount-icon"],[1,"amount-value","discount"],["class","discount-details",4,"ngIf"],[1,"discount-details"],[1,"discount-name"],["class","discount-description",4,"ngIf"],[1,"discount-description"],[1,"amount-item","total"],[1,"flex","flex-col","w-full"],[1,"flex","justify-between","items-center"],["class","mt-2 pt-2 border-t border-primary-200",4,"ngIf"],["class","mt-2 pt-2 border-t border-green-200",4,"ngIf"],[1,"mt-2","pt-2","border-t","border-primary-200"],[1,"flex","justify-between","items-center","text-sm"],[1,"text-orange-600"],[1,"font-semibold","text-orange-700"],[1,"mt-2","pt-2","border-t","border-green-200"],[1,"text-green-600"],["class","text-green-700",4,"ngIf"],[1,"text-green-700"],[1,"amount-item","estimated"],[4,"ngIf"],["class","estimated-discount-note",4,"ngIf"],[1,"estimated-discount-note"],[1,"text-blue-600"],[1,"status-actions"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"]],template:function(s,m){s&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return m.goBack()}),i(3,"mat-icon"),o(4,"arrow_back"),n()(),i(5,"div",3)(6,"h1"),o(7,"Detalle de Sesi\xF3n"),n(),u(8,K,7,5,"div",4),n()(),u(9,W,4,0,"div",5)(10,$,7,1,"div",6)(11,Pt,56,21,"div",7),n()),s&2&&(a(8),r("ngIf",m.session),a(),r("ngIf",m.loading),a(),r("ngIf",m.error&&!m.loading),a(),r("ngIf",m.session&&!m.loading))},dependencies:[O,M,I,L,w,k,R,F,Q,Y,B,N,z,q],styles:['@charset "UTF-8";.session-detail-container[_ngcontent-%COMP%]{padding:2rem;max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;margin-bottom:3rem}.back-button[_ngcontent-%COMP%]{margin-top:.25rem}.header-content[_ngcontent-%COMP%]{flex:1}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2rem;font-weight:700;color:var(--fuse-text-primary);line-height:1.2}.session-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.session-id[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--fuse-text-secondary);background:var(--fuse-bg-card);padding:.25rem .75rem;border-radius:1rem;border:1px solid var(--fuse-border)}.plate[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--fuse-primary-600);background:var(--fuse-primary-50);padding:.5rem 1rem;border-radius:.5rem;border:1px solid var(--fuse-primary-200)}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:1rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--fuse-text-secondary);margin:0}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;margin-bottom:1rem}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem}.session-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.main-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem}.info-section[_ngcontent-%COMP%]{background:var(--fuse-bg-card);border:1px solid var(--fuse-border);border-radius:.75rem;padding:1.5rem}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1rem;font-weight:600;color:var(--fuse-text-primary);text-transform:uppercase;letter-spacing:.05em}.info-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.info-entry[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid var(--fuse-border)}.info-entry[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--fuse-text-secondary)}.info-value[_ngcontent-%COMP%]{font-size:.875rem;font-weight:400;color:var(--fuse-text-primary);text-align:right}.financial-summary[_ngcontent-%COMP%]{background:var(--fuse-bg-card);border:1px solid var(--fuse-border);border-radius:.75rem;padding:1.5rem}.financial-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1rem;font-weight:600;color:var(--fuse-text-primary);text-transform:uppercase;letter-spacing:.05em}.amounts[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.amount-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--fuse-bg-default);border-radius:.5rem;border:1px solid var(--fuse-border)}.amount-item.total[_ngcontent-%COMP%]{background:var(--fuse-primary-50);border-color:var(--fuse-primary-200)}.amount-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--fuse-text-secondary)}.amount-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--fuse-text-primary)}.amount-value.discount[_ngcontent-%COMP%]{color:var(--fuse-warn-600)}.amount-item.total[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{color:var(--fuse-primary-600);font-size:1.125rem}.amount-item.estimated[_ngcontent-%COMP%]{background:var(--fuse-warn-50);border-color:var(--fuse-warn-200)}.amount-item.estimated[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{color:var(--fuse-warn-600);font-size:1.125rem}.amount-item.discount-info[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,var(--fuse-primary-50),var(--fuse-primary-100));border-color:var(--fuse-primary-300);flex-direction:column;align-items:flex-start;gap:.75rem}.discount-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.discount-header[_ngcontent-%COMP%]   .amount-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--fuse-primary-800);font-weight:600}.discount-icon[_ngcontent-%COMP%]{font-size:1.125rem;width:1.125rem;height:1.125rem;color:var(--fuse-primary-600)}.discount-details[_ngcontent-%COMP%]{width:100%;padding-top:.75rem;border-top:1px solid var(--fuse-primary-200)}.discount-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--fuse-primary-900);margin:0 0 .25rem}.discount-description[_ngcontent-%COMP%]{font-size:.75rem;color:var(--fuse-primary-700);margin:0;line-height:1.4}.estimated-discount-note[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.5rem;border-top:1px solid var(--fuse-warn-200)}.info-value.real-time[_ngcontent-%COMP%]{color:var(--fuse-primary-600);font-weight:600;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.7}to{opacity:1}}.status-section[_ngcontent-%COMP%]{background:var(--fuse-bg-card);border:1px solid var(--fuse-border);border-radius:.75rem;padding:1.5rem}.status-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.5rem;border-radius:.75rem;border:2px solid var(--fuse-border)}.status-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.status-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem}.status-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.status-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--fuse-text-primary)}.status-description[_ngcontent-%COMP%]{font-size:.875rem;color:var(--fuse-text-secondary)}.status-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.status-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-PAID[_ngcontent-%COMP%]{background:var(--fuse-success-50);border-color:var(--fuse-success-300)}.status-PAID[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:var(--fuse-success-600)}.status-TO_PAY[_ngcontent-%COMP%]{background:var(--fuse-warn-50);border-color:var(--fuse-warn-300)}.status-TO_PAY[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:var(--fuse-warn-600)}.status-ACTIVE[_ngcontent-%COMP%]{background:var(--fuse-primary-50);border-color:var(--fuse-primary-300)}.status-ACTIVE[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:var(--fuse-primary-600)}.status-CANCELLED[_ngcontent-%COMP%]{background:var(--fuse-error-50);border-color:var(--fuse-error-300)}.status-CANCELLED[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{color:var(--fuse-error-600)}mat-chip[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem}.status-success[_ngcontent-%COMP%]{background-color:var(--fuse-success-100)!important;color:var(--fuse-success-800)!important}.status-primary[_ngcontent-%COMP%]{background-color:var(--fuse-primary-100)!important;color:var(--fuse-primary-800)!important}.status-warn[_ngcontent-%COMP%]{background-color:var(--fuse-warn-100)!important;color:var(--fuse-warn-800)!important}.status-error[_ngcontent-%COMP%]{background-color:var(--fuse-error-100)!important;color:var(--fuse-error-800)!important}.chip-full-day[_ngcontent-%COMP%]{background-color:var(--fuse-primary-100)!important;color:var(--fuse-primary-800)!important;font-weight:600}.chip-time[_ngcontent-%COMP%]{background-color:var(--fuse-success-100)!important;color:var(--fuse-success-800)!important;font-weight:600}.full-day-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important;gap:.5rem;padding:1rem;background:var(--fuse-primary-50);border-radius:.5rem;border:1px solid var(--fuse-primary-200);margin-top:.5rem}.full-day-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--fuse-primary-700);font-weight:600;font-size:.875rem}.full-day-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.125rem;width:1.125rem;height:1.125rem;color:var(--fuse-primary-600)}.full-day-details[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.75rem;border-top:1px solid var(--fuse-primary-200);width:100%}.full-day-text[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--fuse-text-secondary);line-height:1.5;margin:0}.full-day-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--fuse-primary-700);font-weight:600}@media (max-width: 768px){.session-detail-container[_ngcontent-%COMP%]{padding:1rem}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.session-meta[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.main-info[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.status-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.status-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.full-day-info[_ngcontent-%COMP%]{padding:.75rem}}']})}}return e})();export{Ht as SessionDetailComponent};
