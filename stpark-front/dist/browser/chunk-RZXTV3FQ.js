import{a as Ne}from"./chunk-LVCPLUSY.js";import{c as Ae}from"./chunk-ICPS6N2F.js";import{a as Te,b as ke,c as Pe,d as T,e as Ve,f as Fe,g as Be}from"./chunk-TU7IT4N6.js";import{a as xe,b as he,c as Ce,d as Ie,e as Se,f as ye,g as be,h as Ee,i as Me,j as we,k as De}from"./chunk-Y6UNS2UZ.js";import{a as Oe,c as ze,f as Re}from"./chunk-N7KP3IEB.js";import{a as ue,b as fe,c as ge,d as ve}from"./chunk-EEUJEGPN.js";import{a as ee,b as te,c as ie,d as ne}from"./chunk-IDWAZBHT.js";import"./chunk-FSA3IEFI.js";import{a as pe,b as _e}from"./chunk-POSCZER2.js";import"./chunk-ECYJLMJT.js";import{a as Z}from"./chunk-LEYETUYV.js";import"./chunk-VKB6BRO6.js";import{b as X,c as Y}from"./chunk-IMRKXFOQ.js";import{d as me,e as se}from"./chunk-5Q7CCL6V.js";import{a as de,b as ce}from"./chunk-CWSZZ2DY.js";import{b as U,f as Q,j as q,k as G}from"./chunk-K3BNOLHS.js";import{b as ae,f as oe,j as re,z as le}from"./chunk-ZTFUS4RN.js";import{fa as H,la as $,na as J,oa as K}from"./chunk-QQQ5XT6I.js";import"./chunk-YXFY4UXK.js";import"./chunk-FFRRSTTN.js";import"./chunk-EARUC3FY.js";import{l as j,m as L,s as W}from"./chunk-BAM5RHC5.js";import{$b as h,Eb as s,Ib as P,Lc as N,Pb as n,Qb as t,Rb as y,Sb as v,Tb as x,U as k,Vb as S,bb as o,bc as d,cb as w,f as F,fc as O,gc as z,hc as R,lc as D,mc as a,nc as u,oa as f,oc as C,pa as g,pb as A,rc as b,sc as E,tc as M,uc as B,wb as p}from"./chunk-MLNNMN4J.js";import{a as V}from"./chunk-TSRGIXR5.js";function je(i,r){i&1&&(n(0,"p",23),a(1,"Todas las facturas generadas en el sistema"),t())}function Le(i,r){i&1&&(n(0,"p",23),a(1,"Gestiona las facturas de tu estacionamiento"),t())}function We(i,r){i&1&&(v(0),n(1,"mat-option",24),a(2,"Sin pago registrado"),t(),n(3,"mat-option",25),a(4,"Pago registrado"),t(),x())}function He(i,r){i&1&&(v(0),n(1,"mat-option",24),a(2,"Sin pago registrado"),t(),n(3,"mat-option",25),a(4,"Pago registrado"),t(),n(5,"mat-option",26),a(6,"Factura vencida"),t(),n(7,"mat-option",27),a(8,"Cancelada"),t(),x())}function Ue(i,r){i&1&&(n(0,"div",28),y(1,"mat-spinner",29),t())}function Qe(i,r){i&1&&(n(0,"th",55),a(1,"Folio"),t())}function qe(i,r){if(i&1&&(n(0,"td",56)(1,"span",57),a(2),t()()),i&2){let e=r.$implicit;o(2),u(e.folio)}}function Ge(i,r){i&1&&(n(0,"th",58),a(1,"Estacionamiento"),t())}function $e(i,r){if(i&1&&(n(0,"td",56)(1,"span",59),a(2),t()()),i&2){let e=r.$implicit;o(2),u(e.tenant_name||(e.tenant==null?null:e.tenant.name)||"N/A")}}function Je(i,r){i&1&&(n(0,"th",60),a(1,"Cliente"),t())}function Ke(i,r){if(i&1&&(n(0,"td",56)(1,"span",61),a(2),t()()),i&2){let e=r.$implicit;o(2),u(e.client_name)}}function Xe(i,r){i&1&&(n(0,"th",62),a(1,"RUT Cliente"),t())}function Ye(i,r){if(i&1&&(n(0,"td",56)(1,"span",63),a(2),t()()),i&2){let e=r.$implicit,m=d(2);o(2),u(m.formatRut(e.client_rut))}}function Ze(i,r){i&1&&(n(0,"th",64),a(1,"Fecha Emisi\xF3n"),t())}function et(i,r){if(i&1&&(n(0,"td",56),a(1),t()),i&2){let e=r.$implicit,m=d(2);o(),C(" ",m.formatDate(e.emission_date)," ")}}function tt(i,r){i&1&&(n(0,"th",65),a(1,"Fecha Pago"),t())}function it(i,r){if(i&1&&(n(0,"td",56),a(1),t()),i&2){let e=r.$implicit,m=d(2);o(),C(" ",e.payment_date?m.formatDate(e.payment_date):"-"," ")}}function nt(i,r){i&1&&(n(0,"th",66),a(1,"Monto Total"),t())}function at(i,r){if(i&1&&(n(0,"td",56)(1,"span",67),a(2),t()()),i&2){let e=r.$implicit,m=d(2);o(2),C(" ",m.formatAmount(e.total_amount)," ")}}function ot(i,r){i&1&&(n(0,"th",68),a(1,"Estado"),t())}function rt(i,r){if(i&1&&(n(0,"td",56)(1,"span",69),a(2),t()()),i&2){let e=r.$implicit,m=d(2);o(),P("bg-"+m.getStatusColor(e.status)+"-100 text-"+m.getStatusColor(e.status)+"-800"),o(),C(" ",m.getStatusLabel(e.status)," ")}}function lt(i,r){i&1&&(n(0,"th",58),a(1,"Acciones"),t())}function mt(i,r){if(i&1){let e=S();n(0,"button",75),h("click",function(){f(e);let l=d().$implicit,_=d(2);return g(_.payInvoice(l))}),n(1,"mat-icon"),a(2,"payment"),t(),n(3,"span"),a(4,"Pagar"),t()()}}function st(i,r){i&1&&(n(0,"button",72)(1,"mat-icon"),a(2,"edit"),t(),a(3," Editar "),t())}function dt(i,r){if(i&1){let e=S();n(0,"td",56)(1,"button",70)(2,"mat-icon"),a(3,"more_vert"),t()(),n(4,"mat-menu",null,2)(6,"button",71),h("click",function(){let l=f(e).$implicit,_=d(2);return g(_.showInvoiceDetails(l))}),n(7,"mat-icon"),a(8,"visibility"),t(),a(9," Ver detalles "),t(),n(10,"button",72)(11,"mat-icon"),a(12,"print"),t(),a(13," Imprimir "),t(),p(14,mt,5,0,"button",73)(15,st,4,0,"button",74),t()()}if(i&2){let e=r.$implicit,m=D(5),l=d(2);o(),s("matMenuTriggerFor",m),o(13),s("ngIf",!l.isCentralAdminMode&&e.status==="UNPAID"),o(),s("ngIf",l.isCentralAdminMode&&e.status==="PENDING")}}function ct(i,r){i&1&&y(0,"tr",76)}function pt(i,r){i&1&&y(0,"tr",77)}function _t(i,r){i&1&&(n(0,"div",78)(1,"mat-icon",79),a(2,"receipt"),t(),n(3,"h3",80),a(4,"No hay facturas registradas"),t(),n(5,"p",81),a(6,"Las facturas aparecer\xE1n aqu\xED cuando se generen."),t()())}function ut(i,r){if(i&1){let e=S();n(0,"mat-paginator",82),h("page",function(l){f(e);let _=d(2);return g(_.onPageChange(l))}),t()}if(i&2){let e=d(2);s("length",e.totalItems)("pageSize",e.pageSize)("pageIndex",e.currentPage)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",!0)}}function ft(i,r){if(i&1){let e=S();n(0,"mat-card")(1,"mat-card-content",30)(2,"div",31)(3,"table",32),h("matSortChange",function(l){f(e);let _=d();return g(_.onSortChange(l))}),v(4,33),p(5,Qe,2,0,"th",34)(6,qe,3,1,"td",35),x(),v(7,36),p(8,Ge,2,0,"th",37)(9,$e,3,1,"td",35),x(),v(10,38),p(11,Je,2,0,"th",39)(12,Ke,3,1,"td",35),x(),v(13,40),p(14,Xe,2,0,"th",41)(15,Ye,3,1,"td",35),x(),v(16,42),p(17,Ze,2,0,"th",43)(18,et,2,1,"td",35),x(),v(19,44),p(20,tt,2,0,"th",45)(21,it,2,1,"td",35),x(),v(22,46),p(23,nt,2,0,"th",47)(24,at,3,1,"td",35),x(),v(25,48),p(26,ot,2,0,"th",49)(27,rt,3,3,"td",35),x(),v(28,50),p(29,lt,2,0,"th",37)(30,dt,16,3,"td",35),x(),p(31,ct,1,0,"tr",51)(32,pt,1,0,"tr",52),t(),p(33,_t,7,0,"div",53),t(),p(34,ut,1,5,"mat-paginator",54),t()()}if(i&2){let e=d();o(3),s("dataSource",e.invoices)("matSortActive",e.sortBy)("matSortDirection",e.sortOrder)("matSortDisableClear",!0),o(28),s("matHeaderRowDef",e.displayedColumns),o(),s("matRowDefColumns",e.displayedColumns),o(),s("ngIf",!e.loading&&e.invoices.length===0),o(),s("ngIf",e.totalItems>0)}}function gt(i,r){i&1&&(n(0,"div",89),y(1,"mat-spinner",29),t())}function vt(i,r){if(i&1){let e=S();n(0,"div",90)(1,"div")(2,"h2",5),a(3,"Detalle de Factura"),t(),n(4,"p",91),a(5),t()(),n(6,"button",92),h("click",function(){f(e);let l=d(2);return g(l.closeDetailsModal())}),n(7,"mat-icon"),a(8,"close"),t()()()}if(i&2){let e=d(2);o(5),C("Folio: ",e.selectedInvoice.folio,"")}}function xt(i,r){if(i&1&&(n(0,"div")(1,"p",96),a(2,"Estacionamiento"),t(),n(3,"p",67),a(4),t()()),i&2){let e=d(3);o(4),u(e.selectedInvoice.tenant_name||(e.selectedInvoice.tenant==null?null:e.selectedInvoice.tenant.name))}}function ht(i,r){if(i&1&&(n(0,"div")(1,"p",96),a(2,"Sesi\xF3n de Estacionamiento"),t(),n(3,"p",98),a(4),t()()),i&2){let e=d(3);o(4),C("ID: ",e.selectedInvoice.parking_session_id,"")}}function Ct(i,r){if(i&1&&(n(0,"div")(1,"p",96),a(2,"Venta"),t(),n(3,"p",98),a(4),t()()),i&2){let e=d(3);o(4),C("ID: ",e.selectedInvoice.sale_id,"")}}function It(i,r){if(i&1&&(n(0,"tr",119)(1,"td",120),a(2),t(),n(3,"td",121),a(4),t(),n(5,"td",122),a(6),t(),n(7,"td",123),a(8),t()()),i&2){let e=r.$implicit,m=d(4);o(2),u(e.description),o(2),u(e.quantity),o(2),u(m.formatAmount(e.unit_price)),o(2),u(m.formatAmount(e.subtotal))}}function St(i,r){if(i&1&&(n(0,"div",31)(1,"table",113)(2,"thead")(3,"tr",114)(4,"th",115),a(5,"Descripci\xF3n"),t(),n(6,"th",116),a(7,"Cantidad"),t(),n(8,"th",117),a(9,"Precio Unitario"),t(),n(10,"th",117),a(11,"Subtotal (Neto)"),t()()(),n(12,"tbody"),p(13,It,9,4,"tr",118),t()()()),i&2){let e=d(3);o(13),s("ngForOf",e.selectedInvoice.items)}}function yt(i,r){i&1&&(n(0,"div",124)(1,"mat-icon",125),a(2,"inventory_2"),t(),n(3,"p",81),a(4,"No hay items registrados en esta factura"),t()())}function bt(i,r){if(i&1&&(n(0,"div",126)(1,"p",127),a(2,"Notas:"),t(),n(3,"p",128),a(4),t()()),i&2){let e=d(3);o(4),u(e.selectedInvoice.notes)}}function Et(i,r){if(i&1&&(n(0,"div",129)(1,"div",130)(2,"div")(3,"p"),a(4),t()(),n(5,"div")(6,"p"),a(7),t()()()()),i&2){let e=d(3);o(4),C("Fecha de creaci\xF3n: ",e.selectedInvoice.created_at?e.formatDate(e.selectedInvoice.created_at):"N/A",""),o(3),C("\xDAltima actualizaci\xF3n: ",e.selectedInvoice.updated_at?e.formatDate(e.selectedInvoice.updated_at):"N/A","")}}function Mt(i,r){if(i&1&&(n(0,"div",93)(1,"div",4)(2,"h3",94),a(3,"Informaci\xF3n General"),t(),n(4,"div",95)(5,"div")(6,"p",96),a(7,"Estado"),t(),n(8,"span",97),a(9),t()(),p(10,xt,5,1,"div",15),n(11,"div")(12,"p",96),a(13,"Cliente"),t(),n(14,"p",98),a(15),t()(),n(16,"div")(17,"p",96),a(18,"RUT Cliente"),t(),n(19,"p",99),a(20),t()(),n(21,"div")(22,"p",96),a(23,"Fecha Emisi\xF3n"),t(),n(24,"p",98),a(25),t()(),n(26,"div")(27,"p",96),a(28,"Fecha Pago"),t(),n(29,"p",98),a(30),t()(),p(31,ht,5,1,"div",15)(32,Ct,5,1,"div",15),t()(),n(33,"div",4)(34,"h3",94),a(35,"Detalle de Items"),t(),p(36,St,14,1,"div",100)(37,yt,5,0,"div",101),t(),n(38,"div",102)(39,"div",103)(40,"div",104)(41,"div",105)(42,"span",106),a(43,"Monto Neto:"),t(),n(44,"span",107),a(45),t()(),n(46,"div",105)(47,"span",106),a(48,"IVA:"),t(),n(49,"span",107),a(50),t()(),n(51,"div",108)(52,"span",109),a(53,"Total:"),t(),n(54,"span",110),a(55),t()()()()(),p(56,bt,5,1,"div",111)(57,Et,8,2,"div",112),t()),i&2){let e=d(2);o(8),P("bg-"+e.getStatusColor(e.selectedInvoice.status)+"-100 text-"+e.getStatusColor(e.selectedInvoice.status)+"-800"),o(),C(" ",e.getStatusLabel(e.selectedInvoice.status)," "),o(),s("ngIf",e.isCentralAdminMode&&(e.selectedInvoice.tenant_name||(e.selectedInvoice.tenant==null?null:e.selectedInvoice.tenant.name))),o(5),u(e.selectedInvoice.client_name),o(5),u(e.formatRut(e.selectedInvoice.client_rut)),o(5),u(e.formatDate(e.selectedInvoice.emission_date)),o(5),u(e.selectedInvoice.payment_date?e.formatDate(e.selectedInvoice.payment_date):"No pagada"),o(),s("ngIf",e.selectedInvoice.parking_session_id),o(),s("ngIf",e.selectedInvoice.sale_id),o(4),s("ngIf",e.selectedInvoice.items&&e.selectedInvoice.items.length>0),o(),s("ngIf",!e.selectedInvoice.items||e.selectedInvoice.items.length===0),o(8),u(e.formatAmount(e.selectedInvoice.net_amount)),o(5),u(e.formatAmount(e.selectedInvoice.iva_amount)),o(5),u(e.formatAmount(e.selectedInvoice.total_amount)),o(),s("ngIf",e.selectedInvoice.notes),o(),s("ngIf",e.isCentralAdminMode)}}function wt(i,r){if(i&1){let e=S();n(0,"div",131)(1,"button",132),h("click",function(){f(e);let l=d(2);return g(l.closeDetailsModal())}),a(2," Cerrar "),t(),n(3,"button",133)(4,"mat-icon"),a(5,"print"),t(),a(6," Imprimir "),t()()}}function Dt(i,r){if(i&1){let e=S();n(0,"div",83),h("click",function(){f(e);let l=d();return g(l.closeDetailsModal())}),n(1,"div",84),h("click",function(l){return f(e),g(l.stopPropagation())}),p(2,gt,2,0,"div",85)(3,vt,9,1,"div",86)(4,Mt,58,17,"div",87)(5,wt,7,0,"div",88),t()()}if(i&2){let e=d();o(2),s("ngIf",e.loadingDetails),o(),s("ngIf",!e.loadingDetails&&e.selectedInvoice),o(),s("ngIf",!e.loadingDetails&&e.selectedInvoice),o(),s("ngIf",!e.loadingDetails&&e.selectedInvoice)}}var di=(()=>{class i{constructor(e,m,l){this.invoiceService=e,this.authService=m,this.cdr=l,this._unsubscribeAll=new F,this.sortInitialized=!1,this.invoices=[],this.loading=!1,this.isCentralAdminMode=!1,this.displayedColumns=[],this.showDetailsModal=!1,this.selectedInvoice=null,this.loadingDetails=!1,this.totalItems=0,this.pageSize=10,this.currentPage=0,this.pageSizeOptions=[5,10,25,50],this.sortBy="folio",this.sortOrder="desc",this.filters={folio:"",client_name:"",client_rut:"",status:"",emission_date_from:"",emission_date_to:""}}ngOnInit(){this.isCentralAdminMode=this.authService.isCentralAdminMode(),this.isCentralAdminMode?this.displayedColumns=["folio","tenant_name","client_name","client_rut","emission_date","payment_date","total_amount","status","actions"]:this.displayedColumns=["folio","client_name","client_rut","emission_date","payment_date","total_amount","status","actions"],this.loadInvoices()}ngAfterViewInit(){this.initializeSort()}initializeSort(){let e=()=>{if(!this.loading&&this.sort&&!this.sortInitialized)try{this.sort.active=this.sortBy,this.sort.direction=this.sortOrder,this.sortInitialized=!0,this.cdr.detectChanges()}catch(m){console.error("Error initializing sort:",m),this.sortInitialized||setTimeout(e,100)}else!this.sortInitialized&&!this.loading&&setTimeout(e,100)};setTimeout(e,0)}onSortChange(e){e.active&&(this.sortBy=e.active,this.sortOrder=e.direction==="asc"?"asc":"desc",this.currentPage=0,this.loadInvoices())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadInvoices(){this.loading=!0;let e=V({page:this.currentPage+1,per_page:this.pageSize,sort_by:this.sortBy,sort_order:this.sortOrder},this.filters);this.invoiceService.getInvoices(e).pipe(k(this._unsubscribeAll)).subscribe({next:m=>{this.invoices=m.data?.data||[],this.totalItems=m.data?.total||0,this.loading=!1,setTimeout(()=>{this.sortInitialized?this.sort&&(this.sort.active=this.sortBy,this.sort.direction=this.sortOrder):this.initializeSort()},50)},error:m=>{console.error("Error loading invoices:",m),this.loading=!1}})}formatAmount(e){return this.invoiceService.formatAmount(e)}formatDate(e){return this.invoiceService.formatDate(e)}formatRut(e){return this.invoiceService.formatRut(e)}getStatusColor(e){return this.invoiceService.getStatusColor(e)}getStatusLabel(e){return this.invoiceService.getStatusLabel(e)}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize,this.loadInvoices()}applyFilters(){this.currentPage=0,this.loadInvoices()}clearFilters(){this.filters={folio:"",client_name:"",client_rut:"",status:"",emission_date_from:"",emission_date_to:""},this.currentPage=0,this.loadInvoices()}showInvoiceDetails(e){this.showDetailsModal=!0,this.loadingDetails=!0,this.selectedInvoice=null,this.invoiceService.getInvoice(e.id).pipe(k(this._unsubscribeAll)).subscribe({next:m=>{this.selectedInvoice=m.data,this.loadingDetails=!1},error:m=>{console.error("Error loading invoice details:",m),this.loadingDetails=!1,this.closeDetailsModal()}})}closeDetailsModal(){this.showDetailsModal=!1,this.selectedInvoice=null,this.loadingDetails=!1}payInvoice(e){console.log("Pagar factura:",e),alert(`Funci\xF3n de pago para factura ${e.folio} - Pr\xF3ximamente`)}static{this.\u0275fac=function(m){return new(m||i)(w(Ne),w(Z),w(N))}}static{this.\u0275cmp=A({type:i,selectors:[["app-invoices"]],viewQuery:function(m,l){if(m&1&&O(T,5),m&2){let _;z(_=R())&&(l.sort=_.first)}},features:[B([{provide:Te,useValue:Be()}])],decls:55,vars:17,consts:[["pickerFrom",""],["pickerTo",""],["menu","matMenu"],[1,"p-6","w-full"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900"],["class","text-gray-600",4,"ngIf"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["appearance","outline"],["matInput","","placeholder","Buscar por folio",3,"ngModelChange","ngModel"],["matInput","","placeholder","Nombre del cliente",3,"ngModelChange","ngModel"],["matInput","","placeholder","RUT del cliente",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value",""],[4,"ngIf"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[1,"flex","justify-end","gap-2","mt-4"],["mat-stroked-button","",1,"rounded-sm",3,"click"],["mat-raised-button","","color","primary",1,"rounded-sm",3,"click"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",3,"click",4,"ngIf"],[1,"text-gray-600"],["value","UNPAID"],["value","PAID"],["value","OVERDUE"],["value","CANCELLED"],[1,"flex","justify-center","items-center","h-64"],["diameter","50"],[1,"p-0"],[1,"overflow-x-auto"],["mat-table","","matSort","",1,"w-full",3,"matSortChange","dataSource","matSortActive","matSortDirection","matSortDisableClear"],["matColumnDef","folio"],["mat-header-cell","","mat-sort-header","folio",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tenant_name"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","client_name"],["mat-header-cell","","mat-sort-header","client_name",4,"matHeaderCellDef"],["matColumnDef","client_rut"],["mat-header-cell","","mat-sort-header","client_rut",4,"matHeaderCellDef"],["matColumnDef","emission_date"],["mat-header-cell","","mat-sort-header","emission_date",4,"matHeaderCellDef"],["matColumnDef","payment_date"],["mat-header-cell","","mat-sort-header","payment_date",4,"matHeaderCellDef"],["matColumnDef","total_amount"],["mat-header-cell","","mat-sort-header","total_amount",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","status",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center py-8",4,"ngIf"],["class","mt-4",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page",4,"ngIf"],["mat-header-cell","","mat-sort-header","folio"],["mat-cell",""],[1,"font-mono","font-semibold"],["mat-header-cell",""],[1,"font-medium","text-blue-600"],["mat-header-cell","","mat-sort-header","client_name"],[1,"font-medium"],["mat-header-cell","","mat-sort-header","client_rut"],[1,"font-mono"],["mat-header-cell","","mat-sort-header","emission_date"],["mat-header-cell","","mat-sort-header","payment_date"],["mat-header-cell","","mat-sort-header","total_amount"],[1,"font-semibold","text-blue-600"],["mat-header-cell","","mat-sort-header","status"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],["mat-icon-button","",1,"rounded-sm",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item",""],["mat-menu-item","","class","pay-invoice-button",3,"click",4,"ngIf"],["mat-menu-item","",4,"ngIf"],["mat-menu-item","",1,"pay-invoice-button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"text-center","py-8"],[1,"text-gray-400","text-6xl"],[1,"text-lg","font-medium","text-gray-900","mt-4"],[1,"text-gray-500"],[1,"mt-4",3,"page","length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","max-w-4xl","w-full","mx-4","max-h-[90vh]","flex","flex-col",3,"click"],["class","flex justify-center items-center p-12",4,"ngIf"],["class","flex justify-between items-center p-6 border-b bg-white sticky top-0 z-10",4,"ngIf"],["class","p-6 overflow-y-auto flex-1",4,"ngIf"],["class","flex justify-end gap-3 p-6 pt-4 border-t border-gray-200 bg-white sticky bottom-0",4,"ngIf"],[1,"flex","justify-center","items-center","p-12"],[1,"flex","justify-between","items-center","p-6","border-b","bg-white","sticky","top-0","z-10"],[1,"text-sm","text-gray-500","mt-1"],["mat-icon-button","",1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"p-6","overflow-y-auto","flex-1"],[1,"text-lg","font-semibold","mb-4","text-gray-900"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","text-gray-600","mb-1"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","inline-block"],[1,"font-semibold"],[1,"font-semibold","font-mono"],["class","overflow-x-auto",4,"ngIf"],["class","text-center py-8 bg-gray-50 rounded border border-gray-200",4,"ngIf"],[1,"border-t-2","border-gray-300","pt-4","mb-6"],[1,"flex","justify-end"],[1,"w-80"],[1,"flex","justify-between","mb-3"],[1,"text-gray-600","font-medium"],[1,"font-semibold","text-gray-900"],[1,"flex","justify-between","text-lg","font-bold","border-t-2","border-gray-300","pt-3"],[1,"text-gray-900"],[1,"text-blue-600"],["class","p-4 bg-gray-50 rounded-lg border border-gray-200",4,"ngIf"],["class","mt-6 pt-4 border-t border-gray-200",4,"ngIf"],[1,"w-full","border-collapse","border","border-gray-300"],[1,"bg-gray-100"],[1,"border","border-gray-300","p-3","text-left","text-sm","font-semibold","text-gray-700"],[1,"border","border-gray-300","p-3","text-center","text-sm","font-semibold","text-gray-700"],[1,"border","border-gray-300","p-3","text-right","text-sm","font-semibold","text-gray-700"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"border","border-gray-300","p-3"],[1,"border","border-gray-300","p-3","text-center"],[1,"border","border-gray-300","p-3","text-right"],[1,"border","border-gray-300","p-3","text-right","font-semibold"],[1,"text-center","py-8","bg-gray-50","rounded","border","border-gray-200"],[1,"text-gray-400","text-4xl","mb-2"],[1,"p-4","bg-gray-50","rounded-lg","border","border-gray-200"],[1,"text-sm","font-semibold","text-gray-700","mb-2"],[1,"text-sm","text-gray-600","whitespace-pre-wrap"],[1,"mt-6","pt-4","border-t","border-gray-200"],[1,"grid","grid-cols-2","gap-4","text-xs","text-gray-500"],[1,"flex","justify-end","gap-3","p-6","pt-4","border-t","border-gray-200","bg-white","sticky","bottom-0"],["mat-stroked-button","",3,"click"],["mat-raised-button","","color","primary"]],template:function(m,l){if(m&1){let _=S();n(0,"div",3)(1,"div",4)(2,"h1",5),a(3,"Facturas"),t(),p(4,je,2,0,"p",6)(5,Le,2,0,"p",6),t(),n(6,"mat-card",4)(7,"mat-card-content",7)(8,"div",8)(9,"mat-form-field",9)(10,"mat-label"),a(11,"Folio"),t(),n(12,"input",10),M("ngModelChange",function(c){return f(_),E(l.filters.folio,c)||(l.filters.folio=c),g(c)}),t()(),n(13,"mat-form-field",9)(14,"mat-label"),a(15,"Cliente"),t(),n(16,"input",11),M("ngModelChange",function(c){return f(_),E(l.filters.client_name,c)||(l.filters.client_name=c),g(c)}),t()(),n(17,"mat-form-field",9)(18,"mat-label"),a(19,"RUT Cliente"),t(),n(20,"input",12),M("ngModelChange",function(c){return f(_),E(l.filters.client_rut,c)||(l.filters.client_rut=c),g(c)}),t()(),n(21,"mat-form-field",9)(22,"mat-label"),a(23,"Estado"),t(),n(24,"mat-select",13),M("ngModelChange",function(c){return f(_),E(l.filters.status,c)||(l.filters.status=c),g(c)}),n(25,"mat-option",14),a(26,"Todos"),t(),p(27,We,5,0,"ng-container",15)(28,He,9,0,"ng-container",15),t()(),n(29,"mat-form-field",9)(30,"mat-label"),a(31,"Fecha desde"),t(),n(32,"input",16),M("ngModelChange",function(c){return f(_),E(l.filters.emission_date_from,c)||(l.filters.emission_date_from=c),g(c)}),t(),y(33,"mat-datepicker-toggle",17)(34,"mat-datepicker",null,0),t(),n(36,"mat-form-field",9)(37,"mat-label"),a(38,"Fecha hasta"),t(),n(39,"input",16),M("ngModelChange",function(c){return f(_),E(l.filters.emission_date_to,c)||(l.filters.emission_date_to=c),g(c)}),t(),y(40,"mat-datepicker-toggle",17)(41,"mat-datepicker",null,1),t()(),n(43,"div",18)(44,"button",19),h("click",function(){return f(_),g(l.clearFilters())}),n(45,"mat-icon"),a(46,"clear"),t(),a(47," Limpiar "),t(),n(48,"button",20),h("click",function(){return f(_),g(l.applyFilters())}),n(49,"mat-icon"),a(50,"search"),t(),a(51," Filtrar "),t()()()(),p(52,Ue,2,0,"div",21)(53,ft,35,8,"mat-card",15)(54,Dt,6,4,"div",22),t()}if(m&2){let _=D(35),I=D(42);o(4),s("ngIf",l.isCentralAdminMode),o(),s("ngIf",!l.isCentralAdminMode),o(7),b("ngModel",l.filters.folio),o(4),b("ngModel",l.filters.client_name),o(4),b("ngModel",l.filters.client_rut),o(4),b("ngModel",l.filters.status),o(3),s("ngIf",!l.isCentralAdminMode),o(),s("ngIf",l.isCentralAdminMode),o(4),s("matDatepicker",_),b("ngModel",l.filters.emission_date_from),o(),s("for",_),o(6),s("matDatepicker",I),b("ngModel",l.filters.emission_date_to),o(),s("for",I),o(12),s("ngIf",l.loading),o(),s("ngIf",!l.loading),o(),s("ngIf",l.showDetailsModal)}},dependencies:[W,j,L,le,ae,oe,re,De,xe,Ce,be,Ie,he,Ee,Se,ye,Me,we,Re,Oe,ze,K,$,J,Y,X,ce,de,G,q,U,Q,se,me,ve,ue,fe,ge,_e,pe,H,ne,te,ee,ie,Ae,Pe,ke,Fe,T,Ve],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-folio[_ngcontent-%COMP%]{width:10%}.mat-column-tenant_name[_ngcontent-%COMP%]{width:15%}.mat-column-client_name[_ngcontent-%COMP%]{width:18%}.mat-column-client_rut[_ngcontent-%COMP%]{width:12%}.mat-column-emission_date[_ngcontent-%COMP%], .mat-column-payment_date[_ngcontent-%COMP%]{width:10%}.mat-column-net_amount[_ngcontent-%COMP%], .mat-column-iva_amount[_ngcontent-%COMP%], .mat-column-total_amount[_ngcontent-%COMP%]{width:10%;text-align:right}.mat-column-status[_ngcontent-%COMP%]{width:10%}.mat-column-actions[_ngcontent-%COMP%]{width:6%;text-align:center}  .pay-invoice-button{color:#16a34a!important}  .pay-invoice-button .mat-icon{color:#16a34a!important}  .pay-invoice-button span{color:#16a34a!important;font-weight:600!important}  .pay-invoice-button:hover{background-color:#dcfce7!important}@media (max-width: 768px){.mat-column-client_name[_ngcontent-%COMP%], .mat-column-client_rut[_ngcontent-%COMP%]{display:none}}"]})}}return i})();export{di as InvoicesComponent};
