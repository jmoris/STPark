import{a as p}from"./chunk-VKB6BRO6.js";import{d as m}from"./chunk-7OGW3PNS.js";import{_ as i,da as c}from"./chunk-BSJZAB7M.js";var $=(()=>{class n{constructor(t){this.http=t,this.baseUrl=`${p.apiUrl}/reports`}getDashboard(t){let r={};return t&&(r.date=t),this.http.get(`${this.baseUrl}/dashboard`,{params:r})}getSalesReport(t={}){return this.http.get(`${this.baseUrl}/sales`,{params:t})}getPaymentsReport(t={}){return this.http.get(`${this.baseUrl}/payments`,{params:t})}getDebtsReport(t={}){return this.http.get(`${this.baseUrl}/debts`,{params:t})}getOperatorReport(t={}){return this.http.get(`${this.baseUrl}/operator`,{params:t})}getSessionsReport(t={}){return this.http.get(`${this.baseUrl}/sessions`,{params:t})}formatAmount(t){return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(t)}formatDate(t){let r=typeof t=="string"?new Date(t):t;return new Intl.DateTimeFormat("es-CL",{year:"numeric",month:"short",day:"numeric"}).format(r)}exportToCSV(t,r){if(!t||t.length===0){console.warn("No data to export");return}let u=["ID","Placa","Sector","Operador","Fecha Inicio","Fecha Fin","Duraci\xF3n","Monto Total","M\xE9todo de Pago"],h=t.map(e=>{let a=e.payments&&e.payments.length>0?e.payments.map(s=>`${s.method}: $${s.amount}`).join(", "):"Sin pago";return[e.id||"",e.plate||"",e.sector||"N/A",e.operator||"N/A",e.started_at?new Date(e.started_at).toLocaleString("es-CL"):"",e.ended_at?new Date(e.ended_at).toLocaleString("es-CL"):"",e.duration_formatted||`${e.duration_minutes}m`,`$${this.formatNumber(e.amount||0)}`,a]}),l=[u.join(","),...h.map(e=>e.map(a=>`"${a}"`).join(","))].join(`
`),d=new Blob(["\uFEFF"+l],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),b=URL.createObjectURL(d);o.setAttribute("href",b),o.setAttribute("download",`${r}_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}formatNumber(t){return new Intl.NumberFormat("es-CL",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}static{this.\u0275fac=function(r){return new(r||n)(c(m))}}static{this.\u0275prov=i({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{$ as a};
