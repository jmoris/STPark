import{a as ue}from"./chunk-HQDJMMZR.js";import{a as ie,b as re,c as ae}from"./chunk-RY2OXADI.js";import{a as me,b as le,c as de,d as se,e as pe,f as ce}from"./chunk-XQK4L4ZU.js";import{d as Y}from"./chunk-CYULJBIT.js";import{a as ee,b as te}from"./chunk-3TK3OLOO.js";import{a as K,b as Q}from"./chunk-KAI4P3W6.js";import{a as ne,b as oe}from"./chunk-2A6RA7CH.js";import"./chunk-YGRHM56X.js";import{a as _}from"./chunk-VKB6BRO6.js";import{a as W,b as X}from"./chunk-OVLCZUMA.js";import{b as G,c as w}from"./chunk-WP7DXJZF.js";import{b as k,c as P,d as T,j as D,k as N,o as Z,p as J}from"./chunk-4UMW4R4I.js";import{b as L,d as n,f as O,g as V,k as H,l as U,n as j,o as A,s as R,v as $,y as z}from"./chunk-EGGCURRC.js";import{W as F,ea as I,ka as q,na as B}from"./chunk-HOABDKFW.js";import"./chunk-CQGOYTFO.js";import{d as y}from"./chunk-7OGW3PNS.js";import{m as M,s as C}from"./chunk-TQARHOKX.js";import{$b as g,Eb as d,Pb as i,Qb as e,Rb as s,bb as l,cb as u,mc as t,pb as h,wb as f}from"./chunk-BSJZAB7M.js";import"./chunk-TSRGIXR5.js";function fe(r,c){r&1&&(i(0,"mat-error"),t(1," Este campo es requerido "),e())}function ge(r,c){r&1&&(i(0,"mat-error"),t(1," El valor debe ser mayor o igual a 0 "),e())}function _e(r,c){r&1&&(i(0,"mat-error"),t(1," Este campo es requerido "),e())}function xe(r,c){r&1&&(i(0,"mat-error"),t(1," El valor debe ser mayor o igual a 0 "),e())}function be(r,c){r&1&&(i(0,"mat-error"),t(1," Este campo es requerido "),e())}function Ee(r,c){r&1&&(i(0,"mat-error"),t(1," El valor debe ser mayor o igual a 0 "),e())}var We=(()=>{class r{constructor(o,m,a,p){this.fb=o,this.pricingProfileService=m,this.http=a,this.snackBar=p,this.loading=!1,this.pricingForm=this.fb.group({price_per_min:[0,[n.required,n.min(0)]],min_amount:[0,[n.required,n.min(0)]],daily_max_amount:[0,[n.required,n.min(0)]],start_time:["00:00",n.required],end_time:["23:59",n.required],is_active:[!0]})}ngOnInit(){this.loadDefaultPricing()}loadDefaultPricing(){this.loading=!0,this.http.get(`${_.apiUrl}/settings/default-pricing`).subscribe({next:o=>{this.pricingForm.patchValue(o),this.loading=!1},error:o=>{console.log("No hay configuraci\xF3n previa, usando valores por defecto"),this.loading=!1}})}saveSettings(){if(this.pricingForm.invalid){this.snackBar.open("Por favor completa todos los campos correctamente","Cerrar",{duration:3e3});return}this.loading=!0;let o=this.pricingForm.value;this.http.post(`${_.apiUrl}/settings/default-pricing`,o).subscribe({next:()=>{this.snackBar.open("Configuraci\xF3n guardada exitosamente","Cerrar",{duration:3e3}),this.loading=!1},error:m=>{console.error("Error al guardar configuraci\xF3n:",m),this.snackBar.open("Error al guardar la configuraci\xF3n","Cerrar",{duration:3e3}),this.loading=!1}})}resetSettings(){this.pricingForm.reset({price_per_min:0,min_amount:0,daily_max_amount:0,start_time:"00:00",end_time:"23:59",is_active:!0}),this.snackBar.open("Valores restaurados","Cerrar",{duration:2e3})}static{this.\u0275fac=function(m){return new(m||r)(u($),u(ue),u(y),u(ne))}}static{this.\u0275cmp=h({type:r,selectors:[["app-settings"]],decls:114,vars:7,consts:[[1,"p-6","w-full"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],[1,"flex","gap-2"],["mat-stroked-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[1,"w-full"],["label","General"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["appearance","outline"],["matInput","","value","STPark - Sistema de Estacionamientos"],["value","CLP"],["value","USD"],["value","America/Santiago"],["value","UTC"],["value","es"],["value","en"],["label","Precios"],[1,"space-y-4"],[1,"bg-blue-50","dark:bg-blue-900/20","border","border-blue-200","dark:border-blue-800","rounded-lg","p-4"],[1,"flex","items-start","gap-3"],[1,"text-blue-600","dark:text-blue-400"],[1,"text-sm","text-blue-800","dark:text-blue-200"],[3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["matInput","","type","number","formControlName","price_per_min","placeholder","0","min","0"],[4,"ngIf"],["matInput","","type","number","formControlName","min_amount","placeholder","0","min","0"],["matInput","","type","number","formControlName","daily_max_amount","placeholder","0","min","0"],[1,"my-6"],[1,"text-lg","font-semibold","mb-4"],["matInput","","type","time","formControlName","start_time"],["matInput","","type","time","formControlName","end_time"],[1,"flex","items-center","gap-2","mb-4"],["formControlName","is_active"]],template:function(m,a){if(m&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t(4,"Configuraci\xF3n"),e(),i(5,"p",3),t(6,"Configura los par\xE1metros del sistema de estacionamientos"),e()(),i(7,"div",4)(8,"button",5),g("click",function(){return a.resetSettings()}),i(9,"mat-icon"),t(10,"refresh"),e(),t(11," Restaurar "),e(),i(12,"button",6),g("click",function(){return a.saveSettings()}),i(13,"mat-icon"),t(14,"save"),e(),t(15," Guardar "),e()()(),i(16,"mat-tab-group",7)(17,"mat-tab",8)(18,"div",9)(19,"mat-card")(20,"mat-card-header")(21,"mat-card-title"),t(22,"Configuraci\xF3n General"),e(),i(23,"mat-card-subtitle"),t(24,"Par\xE1metros b\xE1sicos del sistema"),e()(),i(25,"mat-card-content")(26,"div",10)(27,"mat-form-field",11)(28,"mat-label"),t(29,"Nombre del sistema"),e(),s(30,"input",12),e(),i(31,"mat-form-field",11)(32,"mat-label"),t(33,"Moneda"),e(),i(34,"mat-select",13)(35,"mat-option",13),t(36,"Peso Chileno (CLP)"),e(),i(37,"mat-option",14),t(38,"D\xF3lar Americano (USD)"),e()()(),i(39,"mat-form-field",11)(40,"mat-label"),t(41,"Zona horaria"),e(),i(42,"mat-select",15)(43,"mat-option",15),t(44,"Santiago (GMT-3)"),e(),i(45,"mat-option",16),t(46,"UTC (GMT+0)"),e()()(),i(47,"mat-form-field",11)(48,"mat-label"),t(49,"Idioma"),e(),i(50,"mat-select",17)(51,"mat-option",17),t(52,"Espa\xF1ol"),e(),i(53,"mat-option",18),t(54,"English"),e()()()()()()()(),i(55,"mat-tab",19)(56,"div",9)(57,"mat-card")(58,"mat-card-header")(59,"mat-card-title"),t(60,"Configuraci\xF3n de Precios por Defecto"),e(),i(61,"mat-card-subtitle"),t(62,"Establece las tarifas por defecto del sistema"),e()(),i(63,"mat-card-content")(64,"div",20)(65,"div",21)(66,"div",22)(67,"mat-icon",23),t(68,"info"),e(),i(69,"div",24)(70,"strong"),t(71,"Nota:"),e(),t(72," Estos precios se utilizar\xE1n como regla de precio por defecto si no existen otras reglas espec\xEDficas para el sector. "),e()()(),i(73,"form",25)(74,"div",26)(75,"mat-form-field",11)(76,"mat-label"),t(77,"Costo por Minuto (CLP)"),e(),s(78,"input",27),i(79,"mat-hint"),t(80,"Precio por cada minuto de estacionamiento"),e(),f(81,fe,2,0,"mat-error",28)(82,ge,2,0,"mat-error",28),e(),i(83,"mat-form-field",11)(84,"mat-label"),t(85,"Tarifa M\xEDnima (CLP)"),e(),s(86,"input",29),i(87,"mat-hint"),t(88,"Cantidad m\xEDnima a cobrar"),e(),f(89,_e,2,0,"mat-error",28)(90,xe,2,0,"mat-error",28),e(),i(91,"mat-form-field",11)(92,"mat-label"),t(93,"Tarifa M\xE1xima (CLP)"),e(),s(94,"input",30),i(95,"mat-hint"),t(96,"L\xEDmite m\xE1ximo a cobrar por d\xEDa"),e(),f(97,be,2,0,"mat-error",28)(98,Ee,2,0,"mat-error",28),e()(),s(99,"mat-divider",31),i(100,"h3",32),t(101,"Configuraci\xF3n de Horarios"),e(),i(102,"div",10)(103,"mat-form-field",11)(104,"mat-label"),t(105,"Hora de Inicio"),e(),s(106,"input",33),e(),i(107,"mat-form-field",11)(108,"mat-label"),t(109,"Hora de Fin"),e(),s(110,"input",34),e()(),i(111,"div",35)(112,"mat-checkbox",36),t(113,"Regla activa"),e()()()()()()()()()()),m&2){let p,x,b,E,S,v;l(73),d("formGroup",a.pricingForm),l(8),d("ngIf",(p=a.pricingForm.get("price_per_min"))==null?null:p.hasError("required")),l(),d("ngIf",(x=a.pricingForm.get("price_per_min"))==null?null:x.hasError("min")),l(7),d("ngIf",(b=a.pricingForm.get("min_amount"))==null?null:b.hasError("required")),l(),d("ngIf",(E=a.pricingForm.get("min_amount"))==null?null:E.hasError("min")),l(7),d("ngIf",(S=a.pricingForm.get("daily_max_amount"))==null?null:S.hasError("required")),l(),d("ngIf",(v=a.pricingForm.get("daily_max_amount"))==null?null:v.hasError("min"))}},dependencies:[C,M,z,H,L,U,O,V,R,j,A,ce,me,de,pe,se,le,B,q,w,G,ae,ie,re,N,D,k,T,P,J,Z,te,ee,I,X,W,Q,K,F,Y,oe],styles:[".mat-mdc-card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.mat-mdc-tab-group[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a}.config-item[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:8px;padding:1rem;transition:all .2s ease}.config-item[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 2px 4px #0000001a}@media (max-width: 768px){.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return r})();export{We as SettingsComponent};
